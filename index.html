<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced English Learning System - æ”¹è‰¯ç‰ˆè‹±èªå­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ </title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-shadow {
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .floating-animation {
            animation: float 3s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        .bounce-in {
            animation: bounceIn 0.6s ease-out;
        }
        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
        .emi-character {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            border-radius: 50%;
            position: relative;
            margin: 0 auto 20px;
        }
        .emi-face {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 48px;
        }
        .speech-bubble {
            position: relative;
            background: white;
            border-radius: 20px;
            padding: 15px 20px;
            margin: 10px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .speech-bubble:before {
            content: '';
            position: absolute;
            top: 20px;
            left: -10px;
            width: 0;
            height: 0;
            border: 10px solid transparent;
            border-right-color: white;
        }
        select {
            background-color: white !important;
            color: #374151 !important;
            border: 2px solid #d1d5db;
        }
        select option {
            background-color: white !important;
            color: #374151 !important;
        }
        .progress-ring {
            transform: rotate(-90deg);
        }
        .progress-ring-circle {
            stroke-dasharray: 251.2;
            stroke-dashoffset: 251.2;
            transition: stroke-dashoffset 0.5s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-6">
        <!-- Header -->
        <div class="gradient-bg text-white p-6 rounded-lg mb-6 card-shadow">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-3xl font-bold mb-2">Enhanced English Learning System</h1>
                    <p class="text-blue-100">æ”¹è‰¯ç‰ˆè‹±èªå­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ  - ã‚ãªãŸå°‚ç”¨ã®è‹±èªãƒˆãƒ¬ãƒ¼ãƒŠãƒ¼</p>
                </div>
                <div class="text-right">
                    <div class="text-2xl font-bold" id="todayScore">0</div>
                    <div class="text-sm text-blue-100">ä»Šæ—¥ã®ã‚¹ã‚³ã‚¢</div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
            <!-- Main Content Area -->
            <div class="lg:col-span-3 space-y-6">
                <!-- Level Assessment -->
                <div class="bg-white p-6 rounded-lg card-shadow">
                    <h2 class="text-xl font-bold mb-4 text-gray-800"><i class="fas fa-chart-line mr-2 text-blue-500"></i>ãƒ¬ãƒ™ãƒ«è¨ºæ–­</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-blue-600" id="currentLevel">åˆç´š</div>
                            <div class="text-sm text-gray-600">ç¾åœ¨ã®ãƒ¬ãƒ™ãƒ«</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-green-600" id="wordsLearned">0</div>
                            <div class="text-sm text-gray-600">å­¦ç¿’æ¸ˆã¿å˜èª</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-purple-600" id="phrasesLearned">0</div>
                            <div class="text-sm text-gray-600">å­¦ç¿’æ¸ˆã¿ãƒ•ãƒ¬ãƒ¼ã‚º</div>
                        </div>
                    </div>
                    <button onclick="startLevelTest()" class="w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-200">
                        <i class="fas fa-play mr-2"></i>ãƒ¬ãƒ™ãƒ«è¨ºæ–­ã‚’é–‹å§‹
                    </button>
                </div>

                <!-- Word Learning Section -->
                <div class="bg-white p-6 rounded-lg card-shadow">
                    <h2 class="text-xl font-bold mb-4 text-gray-800"><i class="fas fa-book mr-2 text-green-500"></i>å˜èªå­¦ç¿’</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ãƒ¬ãƒ™ãƒ«é¸æŠ</label>
                            <select id="wordLevel" class="w-full p-2 border border-gray-300 rounded-lg bg-white text-gray-700">
                                <option value="beginner">åˆç´š (Basic)</option>
                                <option value="intermediate">ä¸­ç´š (Intermediate)</option>
                                <option value="advanced">ä¸Šç´š (Advanced)</option>
                                <option value="slang">ã‚¹ãƒ©ãƒ³ã‚° (Slang)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ã‚«ãƒ†ã‚´ãƒªé¸æŠ</label>
                            <select id="wordCategory" class="w-full p-2 border border-gray-300 rounded-lg bg-white text-gray-700">
                                <option value="business">ãƒ“ã‚¸ãƒã‚¹</option>
                                <option value="daily">æ—¥å¸¸ç”Ÿæ´»</option>
                                <option value="emotions">æ„Ÿæƒ…è¡¨ç¾</option>
                                <option value="technology">ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼</option>
                                <option value="travel">æ—…è¡Œ</option>
                                <option value="food">é£Ÿã¹ç‰©</option>
                            </select>
                        </div>
                    </div>
                    <div id="wordDisplay" class="bg-gray-50 p-4 rounded-lg mb-4 min-h-32">
                        <div class="text-center text-gray-500 mt-8">ã€Œæ–°ã—ã„å˜èªã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦å§‹ã‚ã¾ã—ã‚‡ã†ï¼</div>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="getNewWord()" class="flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition duration-200">
                            <i class="fas fa-sync-alt mr-2"></i>æ–°ã—ã„å˜èª
                        </button>
                        <button onclick="markWordAsLearned()" class="bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-200">
                            <i class="fas fa-check mr-2"></i>è¦šãˆãŸ
                        </button>
                    </div>
                </div>

                <!-- Native Phrases Section -->
                <div class="bg-white p-6 rounded-lg card-shadow">
                    <h2 class="text-xl font-bold mb-4 text-gray-800"><i class="fas fa-comments mr-2 text-purple-500"></i>ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ•ãƒ¬ãƒ¼ã‚ºé›†</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ã‚·ãƒ¼ãƒ³é¸æŠ</label>
                            <select id="phraseScene" class="w-full p-2 border border-gray-300 rounded-lg bg-white text-gray-700">
                                <option value="casual">ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ä¼šè©±</option>
                                <option value="business">ãƒ“ã‚¸ãƒã‚¹</option>
                                <option value="social">ç¤¾äº¤å ´é¢</option>
                                <option value="trending">ãƒˆãƒ¬ãƒ³ãƒ‰è¡¨ç¾</option>
                                <option value="reactions">ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³</option>
                                <option value="agreement">åŒæ„ãƒ»åå¯¾</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ä½¿ç”¨é »åº¦</label>
                            <select id="phraseFrequency" class="w-full p-2 border border-gray-300 rounded-lg bg-white text-gray-700">
                                <option value="all">ã™ã¹ã¦</option>
                                <option value="high">é«˜é »åº¦ (â˜…â˜…â˜…â˜…â˜…)</option>
                                <option value="medium">ä¸­é »åº¦ (â˜…â˜…â˜…â˜…â˜†)</option>
                                <option value="low">ä½é »åº¦ (â˜…â˜…â˜…â˜†â˜†)</option>
                            </select>
                        </div>
                    </div>
                    <div id="phraseDisplay" class="bg-gray-50 p-4 rounded-lg mb-4 min-h-32">
                        <div class="text-center text-gray-500 mt-8">ã€Œæ–°ã—ã„ãƒ•ãƒ¬ãƒ¼ã‚ºã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦å§‹ã‚ã¾ã—ã‚‡ã†ï¼</div>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="getNewPhrase()" class="flex-1 bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition duration-200">
                            <i class="fas fa-sync-alt mr-2"></i>æ–°ã—ã„ãƒ•ãƒ¬ãƒ¼ã‚º
                        </button>
                        <button onclick="markPhraseAsLearned()" class="bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-200">
                            <i class="fas fa-heart mr-2"></i>ãŠæ°—ã«å…¥ã‚Š
                        </button>
                    </div>
                </div>

                <!-- Quick Quiz Section -->
                <div class="bg-white p-6 rounded-lg card-shadow">
                    <h2 class="text-xl font-bold mb-4 text-gray-800"><i class="fas fa-question-circle mr-2 text-red-500"></i>ã‚¯ã‚¤ãƒƒã‚¯ãƒ†ã‚¹ãƒˆ</h2>
                    <div id="quizDisplay" class="bg-gray-50 p-4 rounded-lg mb-4 min-h-40">
                        <div class="text-center text-gray-500 mt-8">ã€Œãƒ†ã‚¹ãƒˆé–‹å§‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¾ã—ã‚‡ã†ï¼</div>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="startQuiz()" class="flex-1 bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition duration-200">
                            <i class="fas fa-play mr-2"></i>ãƒ†ã‚¹ãƒˆé–‹å§‹
                        </button>
                        <button onclick="skipQuestion()" class="bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition duration-200">
                            <i class="fas fa-forward mr-2"></i>ã‚¹ã‚­ãƒƒãƒ—
                        </button>
                    </div>
                </div>

                <!-- Progress Chart -->
                <div class="bg-white p-6 rounded-lg card-shadow">
                    <h2 class="text-xl font-bold mb-4 text-gray-800"><i class="fas fa-chart-bar mr-2 text-indigo-500"></i>å­¦ç¿’é€²æ—</h2>
                    <div style="height: 300px;">
                        <canvas id="progressChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Character Guide Sidebar -->
            <div class="lg:col-span-1">
                <div class="bg-white p-6 rounded-lg card-shadow sticky top-6">
                    <div class="text-center mb-4">
                        <div class="emi-character floating-animation">
                            <div class="emi-face">ğŸ˜Š</div>
                        </div>
                        <h3 class="text-lg font-bold text-gray-800">ã‚¨ãƒŸ</h3>
                        <p class="text-sm text-gray-600">ã‚ãªãŸã®è‹±èªå­¦ç¿’ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼</p>
                    </div>
                    
                    <div id="emiTips" class="space-y-4">
                        <div class="speech-bubble">
                            <p class="text-sm text-gray-700">ã“ã‚“ã«ã¡ã¯ï¼ä»Šæ—¥ã‚‚ä¸€ç·’ã«è‹±èªã‚’å­¦ã³ã¾ã—ã‚‡ã†ï¼âœ¨</p>
                        </div>
                    </div>

                    <div class="mt-6 p-4 bg-blue-50 rounded-lg">
                        <h4 class="font-bold text-blue-800 mb-2">ä»Šæ—¥ã®ç›®æ¨™</h4>
                        <div class="space-y-2">
                            <div class="flex justify-between text-sm">
                                <span>æ–°ã—ã„å˜èª</span>
                                <span id="wordGoal">0/5</span>
                            </div>
                            <div class="w-full bg-blue-200 rounded-full h-2">
                                <div id="wordProgress" class="bg-blue-600 h-2 rounded-full" style="width: 0%"></div>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span>æ–°ã—ã„ãƒ•ãƒ¬ãƒ¼ã‚º</span>
                                <span id="phraseGoal">0/3</span>
                            </div>
                            <div class="w-full bg-purple-200 rounded-full h-2">
                                <div id="phraseProgress" class="bg-purple-600 h-2 rounded-full" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-6 p-4 bg-green-50 rounded-lg">
                        <h4 class="font-bold text-green-800 mb-2">é€£ç¶šå­¦ç¿’è¨˜éŒ²</h4>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-green-600" id="streakDays">1</div>
                            <div class="text-sm text-green-600">æ—¥é€£ç¶š</div>
                        </div>
                        <div class="flex justify-center mt-2">
                            <span class="text-2xl">ğŸ”¥</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Comprehensive vocabulary database
        const vocabulary = {
            beginner: {
                business: [
                    {word: "meeting", meaning: "ä¼šè­°", example: "We have a meeting at 3 PM.", pronunciation: "/ËˆmiËtÉªÅ‹/"},
                    {word: "deadline", meaning: "ç· åˆ‡", example: "The deadline is tomorrow.", pronunciation: "/ËˆdedlaÉªn/"},
                    {word: "project", meaning: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ", example: "This project is important.", pronunciation: "/ËˆprÉ’dÊ’ekt/"},
                    {word: "client", meaning: "é¡§å®¢", example: "Our client is satisfied.", pronunciation: "/ËˆklaÉªÉ™nt/"},
                    {word: "report", meaning: "å ±å‘Šæ›¸", example: "Please prepare the report.", pronunciation: "/rÉªËˆpÉ”Ët/"},
                    {word: "budget", meaning: "äºˆç®—", example: "We need to check the budget.", pronunciation: "/ËˆbÊŒdÊ’Éªt/"},
                    {word: "schedule", meaning: "ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«", example: "What's your schedule today?", pronunciation: "/ËˆÊƒedjuËl/"},
                    {word: "presentation", meaning: "ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³", example: "The presentation went well.", pronunciation: "/ËŒprezÉ™nËˆteÉªÊƒÉ™n/"},
                    {word: "colleague", meaning: "åŒåƒš", example: "My colleague helped me.", pronunciation: "/ËˆkÉ’liËÉ¡/"},
                    {word: "office", meaning: "ã‚ªãƒ•ã‚£ã‚¹", example: "I work in the office.", pronunciation: "/ËˆÉ’fÉªs/"},
                    {word: "manager", meaning: "ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼", example: "The manager is busy.", pronunciation: "/ËˆmÃ¦nÉªdÊ’É™/"},
                    {word: "contract", meaning: "å¥‘ç´„", example: "We signed the contract.", pronunciation: "/ËˆkÉ’ntrÃ¦kt/"},
                    {word: "email", meaning: "ãƒ¡ãƒ¼ãƒ«", example: "I sent you an email.", pronunciation: "/ËˆiËmeÉªl/"},
                    {word: "company", meaning: "ä¼šç¤¾", example: "Our company is growing.", pronunciation: "/ËˆkÊŒmpÉ™ni/"},
                    {word: "salary", meaning: "çµ¦æ–™", example: "My salary increased.", pronunciation: "/ËˆsÃ¦lÉ™ri/"},
                ],
                daily: [
                    {word: "breakfast", meaning: "æœé£Ÿ", example: "I had breakfast early.", pronunciation: "/ËˆbrekfÉ™st/"},
                    {word: "grocery", meaning: "é£Ÿæ–™å“", example: "I need to buy groceries.", pronunciation: "/ËˆÉ¡rÉ™ÊŠsÉ™ri/"},
                    {word: "commute", meaning: "é€šå‹¤", example: "My commute takes an hour.", pronunciation: "/kÉ™ËˆmjuËt/"},
                    {word: "neighborhood", meaning: "è¿‘æ‰€", example: "I love my neighborhood.", pronunciation: "/ËˆneÉªbÉ™hÊŠd/"},
                    {word: "weather", meaning: "å¤©æ°—", example: "The weather is nice today.", pronunciation: "/ËˆweÃ°É™/"},
                    {word: "traffic", meaning: "äº¤é€š", example: "Traffic is heavy today.", pronunciation: "/ËˆtrÃ¦fÉªk/"},
                    {word: "shopping", meaning: "è²·ã„ç‰©", example: "Let's go shopping.", pronunciation: "/ËˆÊƒÉ’pÉªÅ‹/"},
                    {word: "restaurant", meaning: "ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³", example: "This restaurant is popular.", pronunciation: "/ËˆrestÉ™rÉ’nt/"},
                    {word: "hospital", meaning: "ç—…é™¢", example: "The hospital is nearby.", pronunciation: "/ËˆhÉ’spÉªtÉ™l/"},
                    {word: "library", meaning: "å›³æ›¸é¤¨", example: "I study at the library.", pronunciation: "/ËˆlaÉªbrÉ™ri/"},
                    {word: "bank", meaning: "éŠ€è¡Œ", example: "I went to the bank.", pronunciation: "/bÃ¦Å‹k/"},
                    {word: "school", meaning: "å­¦æ ¡", example: "My children go to school.", pronunciation: "/skuËl/"},
                    {word: "park", meaning: "å…¬åœ’", example: "Let's walk in the park.", pronunciation: "/pÉ‘Ëk/"},
                    {word: "station", meaning: "é§…", example: "The station is crowded.", pronunciation: "/ËˆsteÉªÊƒÉ™n/"},
                    {word: "apartment", meaning: "ã‚¢ãƒ‘ãƒ¼ãƒˆ", example: "I live in an apartment.", pronunciation: "/É™ËˆpÉ‘ËtmÉ™nt/"},
                ],
                emotions: [
                    {word: "happy", meaning: "å¹¸ã›ãª", example: "I'm happy to see you.", pronunciation: "/ËˆhÃ¦pi/"},
                    {word: "sad", meaning: "æ‚²ã—ã„", example: "She looks sad today.", pronunciation: "/sÃ¦d/"},
                    {word: "angry", meaning: "æ€’ã£ã¦ã„ã‚‹", example: "He's angry about the delay.", pronunciation: "/ËˆÃ¦Å‹É¡ri/"},
                    {word: "excited", meaning: "èˆˆå¥®ã—ãŸ", example: "I'm excited about the trip.", pronunciation: "/ÉªkËˆsaÉªtÉªd/"},
                    {word: "worried", meaning: "å¿ƒé…ãª", example: "She's worried about the test.", pronunciation: "/ËˆwÊŒrid/"},
                    {word: "surprised", meaning: "é©šã„ãŸ", example: "I was surprised by the news.", pronunciation: "/sÉ™ËˆpraÉªzd/"},
                    {word: "confused", meaning: "æ··ä¹±ã—ãŸ", example: "I'm confused about this.", pronunciation: "/kÉ™nËˆfjuËzd/"},
                    {word: "tired", meaning: "ç–²ã‚ŒãŸ", example: "I'm really tired today.", pronunciation: "/ËˆtaÉªÉ™d/"},
                    {word: "nervous", meaning: "ç·Šå¼µã—ãŸ", example: "I'm nervous about the interview.", pronunciation: "/ËˆnÉœËvÉ™s/"},
                    {word: "comfortable", meaning: "å¿«é©ãª", example: "This chair is comfortable.", pronunciation: "/ËˆkÊŒmftÉ™bÉ™l/"},
                    {word: "disappointed", meaning: "å¤±æœ›ã—ãŸ", example: "I'm disappointed in the result.", pronunciation: "/ËŒdÉªsÉ™ËˆpÉ”ÉªntÉªd/"},
                    {word: "grateful", meaning: "æ„Ÿè¬ã—ã¦ã„ã‚‹", example: "I'm grateful for your help.", pronunciation: "/ËˆÉ¡reÉªtfÉ™l/"},
                    {word: "calm", meaning: "è½ã¡ç€ã„ãŸ", example: "Please stay calm.", pronunciation: "/kÉ‘Ëm/"},
                    {word: "proud", meaning: "èª‡ã‚‰ã—ã„", example: "I'm proud of my son.", pronunciation: "/praÊŠd/"},
                    {word: "lonely", meaning: "å¯‚ã—ã„", example: "I feel lonely sometimes.", pronunciation: "/ËˆlÉ™ÊŠnli/"},
                ]
            },
            intermediate: {
                business: [
                    {word: "negotiate", meaning: "äº¤æ¸‰ã™ã‚‹", example: "We need to negotiate the terms.", pronunciation: "/nÉªËˆÉ¡É™ÊŠÊƒieÉªt/"},
                    {word: "implement", meaning: "å®Ÿè¡Œã™ã‚‹", example: "Let's implement this strategy.", pronunciation: "/ËˆÉªmplÉªment/"},
                    {word: "collaborate", meaning: "å”åŠ›ã™ã‚‹", example: "We should collaborate on this.", pronunciation: "/kÉ™ËˆlÃ¦bÉ™reÉªt/"},
                    {word: "efficiency", meaning: "åŠ¹ç‡", example: "We improved our efficiency.", pronunciation: "/ÉªËˆfÉªÊƒÉ™nsi/"},
                    {word: "revenue", meaning: "åç›Š", example: "Revenue increased this quarter.", pronunciation: "/ËˆrevÉ™njuË/"},
                    {word: "stakeholder", meaning: "åˆ©å®³é–¢ä¿‚è€…", example: "All stakeholders agreed.", pronunciation: "/ËˆsteÉªkhÉ™ÊŠldÉ™/"},
                    {word: "proposal", meaning: "ææ¡ˆ", example: "Your proposal is interesting.", pronunciation: "/prÉ™ËˆpÉ™ÊŠzÉ™l/"},
                    {word: "competitive", meaning: "ç«¶äº‰åŠ›ã®ã‚ã‚‹", example: "We need competitive pricing.", pronunciation: "/kÉ™mËˆpetÉªtÉªv/"},
                    {word: "strategy", meaning: "æˆ¦ç•¥", example: "Our marketing strategy works.", pronunciation: "/ËˆstrÃ¦tÉ™dÊ’i/"},
                    {word: "workflow", meaning: "ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼", example: "The workflow is efficient.", pronunciation: "/ËˆwÉœËkflÉ™ÊŠ/"},
                    {word: "milestone", meaning: "ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³", example: "We reached an important milestone.", pronunciation: "/ËˆmaÉªlstÉ™ÊŠn/"},
                    {word: "deliverable", meaning: "æˆæœç‰©", example: "What are the key deliverables?", pronunciation: "/dÉªËˆlÉªvÉ™rÉ™bÉ™l/"},
                    {word: "benchmark", meaning: "ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯", example: "This is our benchmark.", pronunciation: "/ËˆbentÊƒmÉ‘Ëk/"},
                    {word: "scalable", meaning: "æ‹¡å¼µå¯èƒ½ãª", example: "The solution is scalable.", pronunciation: "/ËˆskeÉªlÉ™bÉ™l/"},
                    {word: "synergy", meaning: "ç›¸ä¹—åŠ¹æœ", example: "There's great synergy between teams.", pronunciation: "/ËˆsÉªnÉ™dÊ’i/"},
                ],
                technology: [
                    {word: "algorithm", meaning: "ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ", example: "The algorithm is complex.", pronunciation: "/ËˆÃ¦lÉ¡É™rÉªÃ°É™m/"},
                    {word: "database", meaning: "ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹", example: "Update the database.", pronunciation: "/ËˆdeÉªtÉ™beÉªs/"},
                    {word: "interface", meaning: "ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹", example: "The user interface is intuitive.", pronunciation: "/ËˆÉªntÉ™feÉªs/"},
                    {word: "framework", meaning: "ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯", example: "We use this development framework.", pronunciation: "/ËˆfreÉªmwÉœËk/"},
                    {word: "encryption", meaning: "æš—å·åŒ–", example: "Data encryption is important.", pronunciation: "/ÉªnËˆkrÉªpÊƒÉ™n/"},
                    {word: "bandwidth", meaning: "å¸¯åŸŸå¹…", example: "We need more bandwidth.", pronunciation: "/ËˆbÃ¦ndwÉªdÎ¸/"},
                    {word: "debugging", meaning: "ãƒ‡ãƒãƒƒã‚°", example: "I spent hours debugging code.", pronunciation: "/diËËˆbÊŒÉ¡ÉªÅ‹/"},
                    {word: "optimization", meaning: "æœ€é©åŒ–", example: "Code optimization improved performance.", pronunciation: "/ËŒÉ’ptÉªmaÉªËˆzeÉªÊƒÉ™n/"},
                    {word: "synchronization", meaning: "åŒæœŸ", example: "Data synchronization failed.", pronunciation: "/ËŒsÉªÅ‹krÉ™naÉªËˆzeÉªÊƒÉ™n/"},
                    {word: "virtualization", meaning: "ä»®æƒ³åŒ–", example: "Server virtualization saves costs.", pronunciation: "/ËŒvÉœËtÊƒuÉ™laÉªËˆzeÉªÊƒÉ™n/"},
                ],
                travel: [
                    {word: "itinerary", meaning: "æ—…ç¨‹", example: "Please check your itinerary.", pronunciation: "/aÉªËˆtÉªnÉ™rÉ™ri/"},
                    {word: "accommodation", meaning: "å®¿æ³Šæ–½è¨­", example: "Book accommodation in advance.", pronunciation: "/É™ËŒkÉ’mÉ™ËˆdeÉªÊƒÉ™n/"},
                    {word: "destination", meaning: "ç›®çš„åœ°", example: "What's your final destination?", pronunciation: "/ËŒdestÉªËˆneÉªÊƒÉ™n/"},
                    {word: "customs", meaning: "ç¨é–¢", example: "Go through customs here.", pronunciation: "/ËˆkÊŒstÉ™mz/"},
                    {word: "layover", meaning: "ä¹—ã‚Šç¶™ã", example: "I have a layover in Tokyo.", pronunciation: "/ËˆleÉªÉ™ÊŠvÉ™/"},
                    {word: "boarding", meaning: "æ­ä¹—", example: "Boarding starts at gate 5.", pronunciation: "/ËˆbÉ”ËdÉªÅ‹/"},
                    {word: "turbulence", meaning: "ä¹±æ°—æµ", example: "We experienced some turbulence.", pronunciation: "/ËˆtÉœËbjÉ™lÉ™ns/"},
                    {word: "jetlag", meaning: "æ™‚å·®ã¼ã‘", example: "I'm suffering from jetlag.", pronunciation: "/ËˆdÊ’etlÃ¦É¡/"},
                    {word: "embassy", meaning: "å¤§ä½¿é¤¨", example: "Contact the embassy.", pronunciation: "/ËˆembÉ™si/"},
                    {word: "excursion", meaning: "å°æ—…è¡Œ", example: "We booked a city excursion.", pronunciation: "/ÉªkËˆskÉœËÊƒÉ™n/"},
                ]
            },
            advanced: {
                business: [
                    {word: "sophisticated", meaning: "æ´—ç·´ã•ã‚ŒãŸ", example: "The software is sophisticated.", pronunciation: "/sÉ™ËˆfÉªstÉªkeÉªtÉªd/"},
                    {word: "paradigm", meaning: "ãƒ‘ãƒ©ãƒ€ã‚¤ãƒ ", example: "A new business paradigm.", pronunciation: "/ËˆpÃ¦rÉ™daÉªm/"},
                    {word: "leverage", meaning: "æ´»ç”¨ã™ã‚‹", example: "Leverage our expertise.", pronunciation: "/ËˆliËvÉ™rÉªdÊ’/"},
                    {word: "acquisition", meaning: "è²·å", example: "The acquisition was successful.", pronunciation: "/ËŒÃ¦kwÉªËˆzÉªÊƒÉ™n/"},
                    {word: "diversification", meaning: "å¤šæ§˜åŒ–", example: "Portfolio diversification is key.", pronunciation: "/daÉªËŒvÉœËsÉªfÉªËˆkeÉªÊƒÉ™n/"},
                    {word: "consolidation", meaning: "çµ±åˆ", example: "Market consolidation continues.", pronunciation: "/kÉ™nËŒsÉ’lÉªËˆdeÉªÊƒÉ™n/"},
                    {word: "optimization", meaning: "æœ€é©åŒ–", example: "Process optimization is ongoing.", pronunciation: "/ËŒÉ’ptÉªmaÉªËˆzeÉªÊƒÉ™n/"},
                    {word: "monetization", meaning: "åç›ŠåŒ–", example: "Data monetization strategies.", pronunciation: "/ËŒmÊŒnÉªtaÉªËˆzeÉªÊƒÉ™n/"},
                    {word: "proliferation", meaning: "æ‹¡æ•£", example: "Technology proliferation is rapid.", pronunciation: "/prÉ™ËŒlÉªfÉ™ËˆreÉªÊƒÉ™n/"},
                    {word: "sustainability", meaning: "æŒç¶šå¯èƒ½æ€§", example: "Focus on sustainability.", pronunciation: "/sÉ™ËŒsteÉªnÉ™ËˆbÉªlÉ™ti/"},
                ]
            },
            slang: [
                {word: "lit", meaning: "ã™ã”ã„ã€æœ€é«˜", example: "That party was lit!", pronunciation: "/lÉªt/"},
                {word: "salty", meaning: "æ€’ã£ã¦ã„ã‚‹", example: "Don't be so salty.", pronunciation: "/ËˆsÉ”Ëlti/"},
                {word: "ghosting", meaning: "éŸ³ä¿¡ä¸é€š", example: "She's been ghosting me.", pronunciation: "/ËˆÉ¡É™ÊŠstÉªÅ‹/"},
                {word: "flex", meaning: "è‡ªæ…¢ã™ã‚‹", example: "Stop flexing your new car.", pronunciation: "/fleks/"},
                {word: "vibe", meaning: "é›°å›²æ°—", example: "I like the vibe here.", pronunciation: "/vaÉªb/"},
                {word: "cap", meaning: "å˜˜", example: "That's cap!", pronunciation: "/kÃ¦p/"},
                {word: "fire", meaning: "ã™ã”ã„", example: "Your outfit is fire!", pronunciation: "/ËˆfaÉªÉ™/"},
                {word: "tea", meaning: "ã‚´ã‚·ãƒƒãƒ—", example: "Spill the tea!", pronunciation: "/tiË/"},
                {word: "stan", meaning: "ç†±çƒˆãªãƒ•ã‚¡ãƒ³", example: "I stan this artist.", pronunciation: "/stÃ¦n/"},
                {word: "periodt", meaning: "ä»¥ä¸Šï¼ˆå¼·èª¿ï¼‰", example: "She's the best, periodt.", pronunciation: "/ËˆpÉªÉ™riÉ™dt/"},
            ]
        };

        // Native phrases database
        const nativePhrases = {
            casual: [
                {phrase: "I'm totally beat!", meaning: "ã‚ã£ã¡ã‚ƒç–²ã‚ŒãŸï¼", frequency: 5, usage: "å‹é”åŒå£«ã§ç–²ã‚ŒãŸæ™‚"},
                {phrase: "No worries!", meaning: "æ°—ã«ã—ãªã„ã§ï¼", frequency: 5, usage: "ç›¸æ‰‹ãŒè¬ã£ãŸæ™‚ã®è¿”äº‹"},
                {phrase: "I'm down for that", meaning: "ãã‚Œã„ã„ã­ï¼", frequency: 4, usage: "ææ¡ˆã«è³›æˆã™ã‚‹æ™‚"},
                {phrase: "That's fire!", meaning: "ã‚ã£ã¡ã‚ƒã„ã„ï¼", frequency: 3, usage: "ä½•ã‹ã‚’è¤’ã‚ã‚‹æ™‚"},
                {phrase: "Catch you later", meaning: "ã¾ãŸå¾Œã§ã­", frequency: 4, usage: "åˆ¥ã‚Œéš›ã®æŒ¨æ‹¶"},
                {phrase: "What's good?", meaning: "èª¿å­ã©ã†ï¼Ÿ", frequency: 4, usage: "ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ãªæŒ¨æ‹¶"},
                {phrase: "I'm swamped", meaning: "å¿™æ®ºã•ã‚Œã¦ã‚‹", frequency: 5, usage: "ã¨ã¦ã‚‚å¿™ã—ã„æ™‚"},
                {phrase: "That slaps!", meaning: "ãã‚Œæœ€é«˜ï¼", frequency: 2, usage: "éŸ³æ¥½ã‚„æ–™ç†ã‚’è¤’ã‚ã‚‹æ™‚"},
                {phrase: "I'm vibing", meaning: "ã„ã„æ„Ÿã˜", frequency: 3, usage: "ãƒªãƒ©ãƒƒã‚¯ã‚¹ã—ã¦ã„ã‚‹æ™‚"},
                {phrase: "Say less", meaning: "ã‚‚ã†ååˆ†ã€åˆ†ã‹ã£ãŸ", frequency: 3, usage: "ç›¸æ‰‹ã®è©±ã«å®Œå…¨åŒæ„"},
                {phrase: "That hits different", meaning: "ãã‚Œã¯æ ¼åˆ¥ã ", frequency: 3, usage: "ç‰¹åˆ¥ã«è‰¯ã„ã‚‚ã®ã«ã¤ã„ã¦"},
                {phrase: "I'm pressed", meaning: "æ™‚é–“ãŒãªã„", frequency: 3, usage: "æ€¥ã„ã§ã„ã‚‹æ™‚"},
                {phrase: "It's giving...", meaning: "ã€œãªæ„Ÿã˜ãŒã™ã‚‹", frequency: 2, usage: "é›°å›²æ°—ã‚’è¡¨ç¾ã™ã‚‹æ™‚"},
                {phrase: "Touch grass", meaning: "å¤–ã«å‡ºã‚", frequency: 2, usage: "å®¶ã«ç± ã‚‚ã‚Šã™ãã®äººã«"},
                {phrase: "Bet", meaning: "äº†è§£ã€ãã†ã ã­", frequency: 4, usage: "åŒæ„ã‚„ç¢ºèªã®è¿”äº‹"},
            ],
            business: [
                {phrase: "Let's circle back on this", meaning: "ã“ã‚Œã¯å¾Œã§å†æ¤œè¨ã—ã¾ã—ã‚‡ã†", frequency: 5, usage: "ä¼šè­°ã§è©±é¡Œã‚’ä¿ç•™ã™ã‚‹æ™‚"},
                {phrase: "I'll ping you later", meaning: "å¾Œã§é€£çµ¡ã—ã¾ã™", frequency: 4, usage: "åŒåƒšã«é€£çµ¡ã™ã‚‹äºˆå®šã‚’ä¼ãˆã‚‹"},
                {phrase: "We're on the same page", meaning: "èªè­˜ãŒä¸€è‡´ã—ã¦ã„ã¾ã™ã­", frequency: 5, usage: "ç†è§£ãŒå…±æœ‰ã•ã‚Œã¦ã„ã‚‹ç¢ºèª"},
                {phrase: "Let's take this offline", meaning: "ã“ã‚Œã¯åˆ¥é€”è©±ã—ã¾ã—ã‚‡ã†", frequency: 4, usage: "ä¼šè­°å¤–ã§è­°è«–ã—ãŸã„æ™‚"},
                {phrase: "Can we table this?", meaning: "ã“ã‚Œã¯ä¿ç•™ã«ã§ãã¾ã™ã‹ï¼Ÿ", frequency: 3, usage: "è­°é¡Œã‚’å¾Œå›ã—ã«ã—ãŸã„æ™‚"},
                {phrase: "I'll loop you in", meaning: "ã‚ãªãŸã‚‚å«ã‚ã¾ã™", frequency: 4, usage: "èª°ã‹ã‚’è­°è«–ã«åŠ ãˆã‚‹æ™‚"},
                {phrase: "Let's drill down", meaning: "è©³ã—ãæ˜ã‚Šä¸‹ã’ã¾ã—ã‚‡ã†", frequency: 3, usage: "è©³ç´°ãªåˆ†æãŒå¿…è¦ãªæ™‚"},
                {phrase: "That's a hard no", meaning: "ãã‚Œã¯çµ¶å¯¾ã«ãƒ€ãƒ¡", frequency: 3, usage: "å¼·ãåå¯¾ã™ã‚‹æ™‚"},
                {phrase: "Let's run it up the flagpole", meaning: "ä¸Šã«ç›¸è«‡ã—ã¦ã¿ã¾ã—ã‚‡ã†", frequency: 2, usage: "ä¸Šå¸ã®æ„è¦‹ã‚’èããŸã„æ™‚"},
                {phrase: "It's a win-win", meaning: "åŒæ–¹ã«ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚‹", frequency: 4, usage: "äº’ã„ã«åˆ©ç›Šã®ã‚ã‚‹ææ¡ˆ"},
                {phrase: "Let's pivot", meaning: "æ–¹å‘è»¢æ›ã—ã¾ã—ã‚‡ã†", frequency: 3, usage: "æˆ¦ç•¥ã‚’å¤‰æ›´ã™ã‚‹æ™‚"},
                {phrase: "That's low-hanging fruit", meaning: "ãã‚Œã¯ç°¡å˜ã«é”æˆã§ãã‚‹", frequency: 3, usage: "ç°¡å˜ãªèª²é¡Œã«ã¤ã„ã¦"},
                {phrase: "We need to think outside the box", meaning: "æ—¢æˆæ¦‚å¿µã«ã¨ã‚‰ã‚ã‚Œãšè€ƒãˆã‚‹å¿…è¦ãŒã‚ã‚‹", frequency: 4, usage: "å‰µé€ çš„ãªè§£æ±ºç­–ãŒå¿…è¦ãªæ™‚"},
                {phrase: "Let's touch base", meaning: "é€£çµ¡ã‚’å–ã‚Šåˆã„ã¾ã—ã‚‡ã†", frequency: 5, usage: "å®šæœŸçš„ãªç¢ºèªã®ç´„æŸ"},
                {phrase: "That's not scalable", meaning: "ãã‚Œã¯æ‹¡å¼µæ€§ãŒãªã„", frequency: 3, usage: "ãƒ“ã‚¸ãƒã‚¹æˆé•·ã«å¯¾å¿œã§ããªã„æ™‚"},
            ],
            social: [
                {phrase: "How have you been?", meaning: "æœ€è¿‘ã©ã†ã§ã™ã‹ï¼Ÿ", frequency: 5, usage: "ä¹…ã—ã¶ã‚Šã«ä¼šã£ãŸäººã¸ã®æŒ¨æ‹¶"},
                {phrase: "It's been a while", meaning: "ãŠä¹…ã—ã¶ã‚Šã§ã™", frequency: 5, usage: "ã—ã°ã‚‰ãä¼šã£ã¦ã„ãªã„äººã«"},
                {phrase: "What brings you here?", meaning: "ã©ã¡ã‚‰ã¾ã§ï¼Ÿ", frequency: 4, usage: "å¶ç„¶ä¼šã£ãŸäººã¸ã®è³ªå•"},
                {phrase: "Small world!", meaning: "ä¸–é–“ã¯ç‹­ã„ã§ã™ã­ï¼", frequency: 4, usage: "æ„å¤–ãªå ´æ‰€ã§çŸ¥ã‚Šåˆã„ã«ä¼šã£ãŸæ™‚"},
                {phrase: "Let's keep in touch", meaning: "é€£çµ¡ã‚’å–ã‚Šåˆã„ã¾ã—ã‚‡ã†", frequency: 5, usage: "åˆ¥ã‚Œéš›ã®ç¤¾äº¤è¾ä»¤"},
                {phrase: "I'll take a rain check", meaning: "ä»Šåº¦ã«ã—ã¾ã™", frequency: 3, usage: "èª˜ã„ã‚’ä¸å¯§ã«æ–­ã‚‹æ™‚"},
                {phrase: "That rings a bell", meaning: "ãã‚Œã¯èãè¦šãˆãŒã‚ã‚‹", frequency: 3, usage: "ä½•ã‹ã‚’æ€ã„å‡ºã—ãã†ãªæ™‚"},
                {phrase: "Break a leg!", meaning: "é ‘å¼µã£ã¦ï¼", frequency: 3, usage: "èª°ã‹ã‚’å¿œæ´ã™ã‚‹æ™‚"},
                {phrase: "I'm all ears", meaning: "ã‚ˆãèã„ã¦ã„ã¾ã™", frequency: 3, usage: "ç›¸æ‰‹ã®è©±ã«é›†ä¸­ã—ã¦ã„ã‚‹æ™‚"},
                {phrase: "It's a piece of cake", meaning: "æœé£¯å‰ã§ã™", frequency: 3, usage: "ä½•ã‹ãŒç°¡å˜ã ã¨è¨€ã†æ™‚"},
                {phrase: "Don't mention it", meaning: "ã©ã†ã„ãŸã—ã¾ã—ã¦", frequency: 4, usage: "ãŠç¤¼ã«å¯¾ã™ã‚‹è¿”äº‹"},
                {phrase: "My pleasure", meaning: "ã©ã†ã„ãŸã—ã¾ã—ã¦", frequency: 4, usage: "ä¸å¯§ãªãŠç¤¼ã®è¿”äº‹"},
                {phrase: "After you", meaning: "ãŠå…ˆã«ã©ã†ã", frequency: 4, usage: "ç›¸æ‰‹ã«å…ˆã‚’è­²ã‚‹æ™‚"},
                {phrase: "Excuse me", meaning: "ã™ã¿ã¾ã›ã‚“", frequency: 5, usage: "äººã«å£°ã‚’ã‹ã‘ã‚‹æ™‚ã‚„è¬ã‚‹æ™‚"},
                {phrase: "Pardon me", meaning: "å¤±ç¤¼ã—ã¾ã™", frequency: 3, usage: "ã‚ˆã‚Šä¸å¯§ãªè¬ç½ªã‚„ç¢ºèª"},
            ],
            trending: [
                {phrase: "It's giving main character energy", meaning: "ä¸»äººå…¬ã‚ªãƒ¼ãƒ©ãŒå‡ºã¦ã‚‹", frequency: 2, usage: "è‡ªä¿¡ã«æº€ã¡ãŸäººã«ã¤ã„ã¦"},
                {phrase: "That's so sus", meaning: "ãã‚Œæ€ªã—ã„", frequency: 3, usage: "ç–‘ã‚ã—ã„ã“ã¨ã«ã¤ã„ã¦"},
                {phrase: "I'm living for this", meaning: "ã“ã‚Œæœ€é«˜", frequency: 2, usage: "ä½•ã‹ã«ã¨ã¦ã‚‚èˆˆå¥®ã—ã¦ã„ã‚‹æ™‚"},
                {phrase: "No cap", meaning: "ãƒã‚¸ã§", frequency: 3, usage: "å˜˜å½ã‚Šãªã„ã“ã¨ã‚’å¼·èª¿"},
                {phrase: "That's cap", meaning: "ãã‚Œå˜˜ã§ã—ã‚‡", frequency: 3, usage: "ç–‘ã„ã‚’è¡¨ç¾ã™ã‚‹æ™‚"},
                {phrase: "Periodt", meaning: "ä»¥ä¸Šï¼ˆå¼·èª¿ï¼‰", frequency: 2, usage: "ç™ºè¨€ã‚’å¼·èª¿ã—ã¦çµ‚ãˆã‚‹æ™‚"},
                {phrase: "It's giving...", meaning: "ã€œãªæ„Ÿã˜", frequency: 2, usage: "é›°å›²æ°—ã‚„å°è±¡ã‚’è¡¨ç¾"},
                {phrase: "Slay queen!", meaning: "ã™ã”ã„ã˜ã‚ƒã‚“ï¼", frequency: 2, usage: "èª°ã‹ã‚’è¤’ã‚ç§°ãˆã‚‹æ™‚"},
                {phrase: "That's a vibe", meaning: "ã„ã„æ„Ÿã˜", frequency: 3, usage: "è‰¯ã„é›°å›²æ°—ã«ã¤ã„ã¦"},
                {phrase: "I'm deceased", meaning: "çˆ†ç¬‘", frequency: 2, usage: "ã¨ã¦ã‚‚é¢ç™½ã„æ™‚"},
                {phrase: "It's giving energy", meaning: "ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’æ„Ÿã˜ã‚‹", frequency: 2, usage: "æ´»æ°—ã®ã‚ã‚‹ã‚‚ã®ã«ã¤ã„ã¦"},
                {phrase: "That's rent free in my head", meaning: "é ­ã‹ã‚‰é›¢ã‚Œãªã„", frequency: 2, usage: "å¿˜ã‚Œã‚‰ã‚Œãªã„ã“ã¨ã«ã¤ã„ã¦"},
                {phrase: "We stan", meaning: "ç§ãŸã¡ã¯æ”¯æŒã™ã‚‹", frequency: 2, usage: "èª°ã‹ã‚„ä½•ã‹ã‚’å¼·ãæ”¯æŒ"},
                {phrase: "It's the... for me", meaning: "ç§çš„ã«ã¯ã€œãŒãƒã‚¤ãƒ³ãƒˆ", frequency: 2, usage: "ç‰¹ã«æ³¨ç›®ã—ã¦ã„ã‚‹ç‚¹"},
                {phrase: "That's bussin", meaning: "ã‚ã£ã¡ã‚ƒã†ã¾ã„", frequency: 2, usage: "ç‰¹ã«é£Ÿã¹ç‰©ã«ã¤ã„ã¦"},
            ],
            reactions: [
                {phrase: "No way!", meaning: "ã¾ã•ã‹ï¼", frequency: 5, usage: "é©šãã‚„ä¿¡ã˜ã‚‰ã‚Œãªã„æ™‚"},
                {phrase: "Are you serious?", meaning: "æœ¬æ°—ã§ã™ã‹ï¼Ÿ", frequency: 5, usage: "é©šãã‚„ç¢ºèªã—ãŸã„æ™‚"},
                {phrase: "You've got to be kidding me", meaning: "å†—è«‡ã§ã—ã‚‡", frequency: 4, usage: "ä¿¡ã˜ã‚‰ã‚Œãªã„æ™‚"},
                {phrase: "That's insane!", meaning: "ã‚¯ãƒ¬ã‚¤ã‚¸ãƒ¼ï¼", frequency: 4, usage: "é©šãã‚„æ„Ÿå˜†"},
                {phrase: "Holy cow!", meaning: "ã†ã‚ã‚ï¼", frequency: 3, usage: "é©šã„ãŸæ™‚ã®æ„Ÿå˜†è©"},
                {phrase: "Oh my gosh!", meaning: "ãˆãƒ¼ï¼", frequency: 5, usage: "é©šãã®è¡¨ç¾"},
                {phrase: "What the heck?", meaning: "ä½•ãã‚Œï¼Ÿ", frequency: 4, usage: "å›°æƒ‘ã‚„é©šã"},
                {phrase: "Are you for real?", meaning: "ãƒã‚¸ã§ï¼Ÿ", frequency: 4, usage: "ç¢ºèªã‚„é©šã"},
                {phrase: "That's wild!", meaning: "ãƒ¤ãƒã„ï¼", frequency: 3, usage: "é©šãã‚„æ„Ÿå˜†"},
                {phrase: "I can't even", meaning: "ã‚‚ã†ç„¡ç†", frequency: 3, usage: "å‘†ã‚Œã‚„é©šã"},
                {phrase: "That's nuts!", meaning: "ç‹‚ã£ã¦ã‚‹ï¼", frequency: 3, usage: "ä¿¡ã˜ã‚‰ã‚Œãªã„æ™‚"},
                {phrase: "Shut up!", meaning: "ã†ããƒ¼ï¼", frequency: 4, usage: "é©šãã®è¡¨ç¾ï¼ˆå‹é”åŒå£«ï¼‰"},
                {phrase: "Get out of here!", meaning: "ã†ãã§ã—ã‚‡ï¼", frequency: 3, usage: "ä¿¡ã˜ã‚‰ã‚Œãªã„æ™‚"},
                {phrase: "You're pulling my leg", meaning: "ã‹ã‚‰ã‹ã£ã¦ã‚‹ã§ã—ã‚‡", frequency: 3, usage: "å†—è«‡ã ã¨æ€ã†æ™‚"},
                {phrase: "That's unbelievable!", meaning: "ä¿¡ã˜ã‚‰ã‚Œãªã„ï¼", frequency: 4, usage: "é©šãã‚„æ„Ÿå˜†"},
            ],
            agreement: [
                {phrase: "Absolutely!", meaning: "ãã®é€šã‚Šï¼", frequency: 5, usage: "å¼·ã„åŒæ„"},
                {phrase: "You're absolutely right", meaning: "ã‚ãªãŸã¯å®Œå…¨ã«æ­£ã—ã„", frequency: 4, usage: "ç›¸æ‰‹ã®æ„è¦‹ã«å®Œå…¨åŒæ„"},
                {phrase: "I couldn't agree more", meaning: "ã“ã‚Œä»¥ä¸ŠåŒæ„ã§ããªã„", frequency: 4, usage: "æœ€å¤§é™ã®åŒæ„"},
                {phrase: "That makes perfect sense", meaning: "å®Œç’§ã«ç†ã«ã‹ãªã£ã¦ã‚‹", frequency: 4, usage: "è«–ç†çš„åŒæ„"},
                {phrase: "You took the words right out of my mouth", meaning: "ã¾ã•ã«ç§ãŒè¨€ã„ãŸã‹ã£ãŸã“ã¨", frequency: 3, usage: "å…¨ãåŒã˜è€ƒãˆã ã£ãŸæ™‚"},
                {phrase: "I'm with you on that", meaning: "ãã‚Œã«ã¤ã„ã¦ã¯ã‚ãªãŸã¨åŒã˜æ„è¦‹", frequency: 4, usage: "ç‰¹å®šã®ç‚¹ã§ã®åŒæ„"},
                {phrase: "You hit the nail on the head", meaning: "çš„ã‚’å°„ã¦ã„ã‚‹", frequency: 3, usage: "æ­£ç¢ºãªæŒ‡æ‘˜ã¸ã®åŒæ„"},
                {phrase: "I see your point", meaning: "ã‚ãªãŸã®è¨€ã„ãŸã„ã“ã¨ã¯åˆ†ã‹ã‚‹", frequency: 5, usage: "ç†è§£ã‚’ç¤ºã™"},
                {phrase: "That's a fair point", meaning: "ãã‚Œã¯æ­£å½“ãªæŒ‡æ‘˜ã ", frequency: 4, usage: "ç›¸æ‰‹ã®æ„è¦‹ã‚’èªã‚ã‚‹"},
                {phrase: "I have to disagree", meaning: "åå¯¾ã›ã–ã‚‹ã‚’å¾—ãªã„", frequency: 4, usage: "ä¸å¯§ãªåå¯¾"},
                {phrase: "I'm not so sure about that", meaning: "ãã‚Œã¯ã©ã†ã‹ãª", frequency: 4, usage: "ç–‘å•ã‚’è¡¨ã™"},
                {phrase: "I see it differently", meaning: "ç§ã¯é•ã†è¦‹æ–¹ã‚’ã—ã¦ã„ã‚‹", frequency: 3, usage: "ç•°ãªã‚‹æ„è¦‹ã‚’è¡¨æ˜"},
                {phrase: "That's debatable", meaning: "ãã‚Œã¯è­°è«–ã®ä½™åœ°ãŒã‚ã‚‹", frequency: 3, usage: "æ„è¦‹ã®ç›¸é•ã‚’ç¤ºã™"},
                {phrase: "I'm on the fence about that", meaning: "ãã‚Œã«ã¤ã„ã¦ã¯è¿·ã£ã¦ã„ã‚‹", frequency: 3, usage: "åˆ¤æ–­ã‚’ä¿ç•™"},
                {phrase: "Let's agree to disagree", meaning: "æ„è¦‹ãŒé•ã†ã¨ã„ã†ã“ã¨ã§åˆæ„ã—ã¾ã—ã‚‡ã†", frequency: 3, usage: "æ„è¦‹ã®ç›¸é•ã‚’å—ã‘å…¥ã‚Œã‚‹"},
            ]
        };

        // Learning state management
        let learningState = {
            currentLevel: 'beginner',
            wordsLearned: 0,
            phrasesLearned: 0,
            todayScore: 0,
            streakDays: 1,
            wordHistory: [],
            phraseHistory: [],
            dailyWordGoal: 5,
            dailyPhraseGoal: 3,
            currentWord: null,
            currentPhrase: null
        };

        // Emi's tips database
        const emiTips = [
            "æ¯æ—¥å°‘ã—ãšã¤ã§ã‚‚ç¶šã‘ã‚‹ã“ã¨ãŒä¸€ç•ªå¤§åˆ‡ã§ã™ï¼ğŸ’ª",
            "æ–°ã—ã„å˜èªã¯3å›ä½¿ã†ã¨è¨˜æ†¶ã«å®šç€ã—ã‚„ã™ã„ã§ã™ã‚ˆï¼ğŸ§ ",
            "ãƒ•ãƒ¬ãƒ¼ã‚ºã¯å®Ÿéš›ã®å ´é¢ã‚’æƒ³åƒã—ãªãŒã‚‰è¦šãˆã¾ã—ã‚‡ã†ï¼ğŸ­",
            "é–“é•ã„ã‚’æã‚Œãšã«å£°ã«å‡ºã—ã¦ç·´ç¿’ã—ã¦ã¿ã¦ãã ã•ã„ï¼ğŸ—£ï¸",
            "ãŠæ°—ã«å…¥ã‚Šã®ãƒ•ãƒ¬ãƒ¼ã‚ºã¯ãƒ¡ãƒ¢ã—ã¦æ™®æ®µã‹ã‚‰ä½¿ã£ã¦ã¿ã¾ã—ã‚‡ã†ï¼ğŸ“",
            "ãƒ¬ãƒ™ãƒ«ãŒä¸ŠãŒã£ãŸã‚‰å‰ã®ãƒ¬ãƒ™ãƒ«ã‚‚å¾©ç¿’ã™ã‚‹ã¨åŠ¹æœçš„ã§ã™ï¼ğŸ”„",
            "è‹±èªå­¦ç¿’ã¯ç­‹ãƒˆãƒ¬ã¨åŒã˜ã€‚ç¶™ç¶šãŒåŠ›ã«ãªã‚Šã¾ã™ï¼ğŸ’ª",
            "åˆ†ã‹ã‚‰ãªã„å˜èªãŒã‚ã£ã¦ã‚‚æ–‡è„ˆã‹ã‚‰æ¨æ¸¬ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼ğŸ”",
            "ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ•ãƒ¬ãƒ¼ã‚ºã‚’ä½¿ã†ã¨è‡ªç„¶ãªè‹±èªã«èã“ãˆã¾ã™ã‚ˆï¼âœ¨",
            "ä»Šæ—¥ã‚‚é ‘å¼µã£ã¦ã„ã‚‹ã‚ãªãŸã‚’èª‡ã‚Šã«æ€ã„ã¾ã™ï¼ğŸŒŸ"
        ];

        let currentTipIndex = 0;

        // Initialize the application
        function initializeApp() {
            loadLearningState();
            updateDisplays();
            showRandomTip();
            initializeChart();
            
            // Show initial tip from Emi
            setTimeout(() => {
                showEmiTip("ã“ã‚“ã«ã¡ã¯ï¼è‹±èªå­¦ç¿’ã¸ã‚ˆã†ã“ãï¼ä¸€ç·’ã«æ¥½ã—ãå­¦ã³ã¾ã—ã‚‡ã†ï¼ğŸš€");
            }, 1000);
        }

        // Load learning state from localStorage
        function loadLearningState() {
            const saved = localStorage.getItem('englishLearningState');
            if (saved) {
                learningState = { ...learningState, ...JSON.parse(saved) };
            }
        }

        // Save learning state to localStorage
        function saveLearningStateToStorage() {
            localStorage.setItem('englishLearningState', JSON.stringify(learningState));
        }

        // Update all displays
        function updateDisplays() {
            document.getElementById('currentLevel').textContent = 
                learningState.currentLevel === 'beginner' ? 'åˆç´š' :
                learningState.currentLevel === 'intermediate' ? 'ä¸­ç´š' : 'ä¸Šç´š';
            document.getElementById('wordsLearned').textContent = learningState.wordsLearned;
            document.getElementById('phrasesLearned').textContent = learningState.phrasesLearned;
            document.getElementById('todayScore').textContent = learningState.todayScore;
            document.getElementById('streakDays').textContent = learningState.streakDays;
            
            // Update goals
            const wordProgress = Math.min((learningState.wordsLearned % learningState.dailyWordGoal), learningState.dailyWordGoal);
            const phraseProgress = Math.min((learningState.phrasesLearned % learningState.dailyPhraseGoal), learningState.dailyPhraseGoal);
            
            document.getElementById('wordGoal').textContent = `${wordProgress}/${learningState.dailyWordGoal}`;
            document.getElementById('phraseGoal').textContent = `${phraseProgress}/${learningState.dailyPhraseGoal}`;
            
            document.getElementById('wordProgress').style.width = `${(wordProgress / learningState.dailyWordGoal) * 100}%`;
            document.getElementById('phraseProgress').style.width = `${(phraseProgress / learningState.dailyPhraseGoal) * 100}%`;
        }

        // Get new word with duplicate prevention
        function getNewWord() {
            const level = document.getElementById('wordLevel').value;
            const category = document.getElementById('wordCategory').value;
            
            let wordList = [];
            if (level === 'slang') {
                wordList = vocabulary.slang;
            } else if (vocabulary[level] && vocabulary[level][category]) {
                wordList = vocabulary[level][category];
            }
            
            if (wordList.length === 0) {
                showEmiTip("ç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“ã€‚é¸æŠã•ã‚ŒãŸã‚«ãƒ†ã‚´ãƒªã«å˜èªãŒã‚ã‚Šã¾ã›ã‚“ã€‚ğŸ˜…");
                return;
            }

            // Filter out recently shown words
            const availableWords = wordList.filter(word => 
                !learningState.wordHistory.slice(-10).includes(word.word)
            );
            
            const selectedWords = availableWords.length > 0 ? availableWords : wordList;
            const randomWord = selectedWords[Math.floor(Math.random() * selectedWords.length)];
            
            // Update history
            learningState.wordHistory.push(randomWord.word);
            if (learningState.wordHistory.length > 50) {
                learningState.wordHistory = learningState.wordHistory.slice(-50);
            }
            
            learningState.currentWord = randomWord;
            displayWord(randomWord);
            saveLearningStateToStorage();
            
            // Random Emi encouragement
            if (Math.random() < 0.3) {
                const encouragements = [
                    "æ–°ã—ã„å˜èªã‚’è¦šãˆã¾ã—ãŸã­ï¼ç´ æ™´ã‚‰ã—ã„ï¼âœ¨",
                    "èªå½™åŠ›ãŒã©ã‚“ã©ã‚“å¢—ãˆã¦ã„ã¾ã™ã‚ˆï¼ğŸ“š",
                    "ãã®èª¿å­ã§é ‘å¼µã‚Šã¾ã—ã‚‡ã†ï¼ğŸ’ª"
                ];
                setTimeout(() => {
                    showEmiTip(encouragements[Math.floor(Math.random() * encouragements.length)]);
                }, 1500);
            }
        }

        // Display word
        function displayWord(word) {
            const display = document.getElementById('wordDisplay');
            display.innerHTML = `
                <div class="bounce-in">
                    <div class="text-2xl font-bold text-blue-600 mb-2">${word.word}</div>
                    <div class="text-gray-600 mb-2">${word.pronunciation}</div>
                    <div class="text-lg text-gray-800 mb-3">${word.meaning}</div>
                    <div class="bg-blue-50 p-3 rounded-lg">
                        <div class="text-sm text-gray-600 mb-1">ä¾‹æ–‡:</div>
                        <div class="text-gray-800 italic">"${word.example}"</div>
                    </div>
                </div>
            `;
        }

        // Get new phrase with duplicate prevention
        function getNewPhrase() {
            const scene = document.getElementById('phraseScene').value;
            const frequency = document.getElementById('phraseFrequency').value;
            
            let phraseList = nativePhrases[scene] || [];
            
            // Filter by frequency if specified
            if (frequency !== 'all') {
                const freqMap = { high: 5, medium: [3, 4], low: [1, 2] };
                phraseList = phraseList.filter(phrase => {
                    if (frequency === 'high') return phrase.frequency === 5;
                    if (frequency === 'medium') return phrase.frequency >= 3 && phrase.frequency <= 4;
                    if (frequency === 'low') return phrase.frequency <= 2;
                    return true;
                });
            }
            
            if (phraseList.length === 0) {
                showEmiTip("é¸æŠã•ã‚ŒãŸæ¡ä»¶ã«ãƒ•ãƒ¬ãƒ¼ã‚ºãŒã‚ã‚Šã¾ã›ã‚“ã€‚ğŸ˜…");
                return;
            }

            // Filter out recently shown phrases
            const availablePhrases = phraseList.filter(phrase => 
                !learningState.phraseHistory.slice(-10).includes(phrase.phrase)
            );
            
            const selectedPhrases = availablePhrases.length > 0 ? availablePhrases : phraseList;
            const randomPhrase = selectedPhrases[Math.floor(Math.random() * selectedPhrases.length)];
            
            // Update history
            learningState.phraseHistory.push(randomPhrase.phrase);
            if (learningState.phraseHistory.length > 50) {
                learningState.phraseHistory = learningState.phraseHistory.slice(-50);
            }
            
            learningState.currentPhrase = randomPhrase;
            displayPhrase(randomPhrase);
            saveLearningStateToStorage();
            
            // Random Emi encouragement
            if (Math.random() < 0.3) {
                const encouragements = [
                    "ãƒã‚¤ãƒ†ã‚£ãƒ–ã¿ãŸã„ãªãƒ•ãƒ¬ãƒ¼ã‚ºã§ã™ã­ï¼ğŸŒŸ",
                    "ã“ã®ãƒ•ãƒ¬ãƒ¼ã‚ºã‚’ä½¿ã£ã¦ä¼šè©±ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼ğŸ’¬",
                    "ç´ æ™´ã‚‰ã—ã„è¡¨ç¾ã‚’å­¦ã³ã¾ã—ãŸï¼ğŸ‘"
                ];
                setTimeout(() => {
                    showEmiTip(encouragements[Math.floor(Math.random() * encouragements.length)]);
                }, 1500);
            }
        }

        // Display phrase
        function displayPhrase(phrase) {
            const display = document.getElementById('phraseDisplay');
            const stars = 'â˜…'.repeat(phrase.frequency) + 'â˜†'.repeat(5 - phrase.frequency);
            
            display.innerHTML = `
                <div class="bounce-in">
                    <div class="text-xl font-bold text-purple-600 mb-2">"${phrase.phrase}"</div>
                    <div class="text-lg text-gray-800 mb-3">${phrase.meaning}</div>
                    <div class="bg-purple-50 p-3 rounded-lg mb-3">
                        <div class="text-sm text-gray-600 mb-1">ä½¿ç”¨å ´é¢:</div>
                        <div class="text-gray-800">${phrase.usage}</div>
                    </div>
                    <div class="flex items-center">
                        <span class="text-sm text-gray-600 mr-2">ä½¿ç”¨é »åº¦:</span>
                        <span class="text-yellow-500">${stars}</span>
                    </div>
                </div>
            `;
        }

        // Mark word as learned
        function markWordAsLearned() {
            if (learningState.currentWord) {
                learningState.wordsLearned++;
                learningState.todayScore += 10;
                updateDisplays();
                saveLearningStateToStorage();
                showEmiTip("å˜èªã‚’è¦šãˆã¾ã—ãŸï¼+10ãƒã‚¤ãƒ³ãƒˆï¼ğŸ‰");
                
                // Check if daily goal is reached
                if ((learningState.wordsLearned % learningState.dailyWordGoal) === 0) {
                    showEmiTip("ä»Šæ—¥ã®å˜èªç›®æ¨™é”æˆï¼ç´ æ™´ã‚‰ã—ã„ã§ã™ã­ï¼ğŸ†");
                }
            }
        }

        // Mark phrase as learned
        function markPhraseAsLearned() {
            if (learningState.currentPhrase) {
                learningState.phrasesLearned++;
                learningState.todayScore += 15;
                updateDisplays();
                saveLearningStateToStorage();
                showEmiTip("ãƒ•ãƒ¬ãƒ¼ã‚ºã‚’ãŠæ°—ã«å…¥ã‚Šã«è¿½åŠ ï¼+15ãƒã‚¤ãƒ³ãƒˆï¼ğŸ’–");
                
                // Check if daily goal is reached
                if ((learningState.phrasesLearned % learningState.dailyPhraseGoal) === 0) {
                    showEmiTip("ä»Šæ—¥ã®ãƒ•ãƒ¬ãƒ¼ã‚ºç›®æ¨™é”æˆï¼å®Œç’§ã§ã™ï¼ğŸŒŸ");
                }
            }
        }

        // Start level test
        function startLevelTest() {
            showEmiTip("ãƒ¬ãƒ™ãƒ«è¨ºæ–­ã‚’é–‹å§‹ã—ã¾ã™ï¼ç°¡å˜ãªè³ªå•ã«ç­”ãˆã¦ãã ã•ã„ã­ï¼ğŸ“");
            // Simplified level test implementation
            setTimeout(() => {
                const levels = ['beginner', 'intermediate', 'advanced'];
                const randomLevel = levels[Math.floor(Math.random() * levels.length)];
                learningState.currentLevel = randomLevel;
                updateDisplays();
                saveLearningStateToStorage();
                showEmiTip(`ã‚ãªãŸã®ãƒ¬ãƒ™ãƒ«ã¯ã€Œ${randomLevel === 'beginner' ? 'åˆç´š' : randomLevel === 'intermediate' ? 'ä¸­ç´š' : 'ä¸Šç´š'}ã€ã§ã™ï¼ğŸ¯`);
            }, 2000);
        }

        // Quiz functionality
        let currentQuiz = null;

        function startQuiz() {
            // Create a simple quiz from learned words
            const allWords = [];
            Object.keys(vocabulary).forEach(level => {
                if (typeof vocabulary[level] === 'object' && !Array.isArray(vocabulary[level])) {
                    Object.keys(vocabulary[level]).forEach(category => {
                        allWords.push(...vocabulary[level][category]);
                    });
                } else if (Array.isArray(vocabulary[level])) {
                    allWords.push(...vocabulary[level]);
                }
            });
            
            const randomWord = allWords[Math.floor(Math.random() * allWords.length)];
            
            // Create wrong answers
            const wrongAnswers = [];
            while (wrongAnswers.length < 3) {
                const wrong = allWords[Math.floor(Math.random() * allWords.length)];
                if (wrong.meaning !== randomWord.meaning && !wrongAnswers.includes(wrong.meaning)) {
                    wrongAnswers.push(wrong.meaning);
                }
            }
            
            // Mix answers
            const allAnswers = [randomWord.meaning, ...wrongAnswers].sort(() => Math.random() - 0.5);
            
            currentQuiz = {
                word: randomWord,
                correctAnswer: randomWord.meaning,
                options: allAnswers
            };
            
            displayQuiz();
        }

        function displayQuiz() {
            if (!currentQuiz) return;
            
            const display = document.getElementById('quizDisplay');
            display.innerHTML = `
                <div class="bounce-in">
                    <div class="text-xl font-bold text-red-600 mb-4">æ¬¡ã®å˜èªã®æ„å‘³ã¯ï¼Ÿ</div>
                    <div class="text-2xl font-bold text-gray-800 mb-4">${currentQuiz.word.word}</div>
                    <div class="space-y-2">
                        ${currentQuiz.options.map((option, index) => `
                            <button onclick="selectAnswer('${option}')" 
                                    class="w-full p-3 text-left bg-gray-100 hover:bg-blue-100 rounded-lg transition duration-200">
                                ${String.fromCharCode(65 + index)}. ${option}
                            </button>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function selectAnswer(selectedAnswer) {
            if (!currentQuiz) return;
            
            const isCorrect = selectedAnswer === currentQuiz.correctAnswer;
            
            if (isCorrect) {
                learningState.todayScore += 20;
                showEmiTip("æ­£è§£ã§ã™ï¼+20ãƒã‚¤ãƒ³ãƒˆï¼ğŸ‰");
            } else {
                showEmiTip(`æ®‹å¿µï¼æ­£è§£ã¯ã€Œ${currentQuiz.correctAnswer}ã€ã§ã—ãŸã€‚ğŸ˜…`);
            }
            
            updateDisplays();
            saveLearningStateToStorage();
            
            setTimeout(() => {
                document.getElementById('quizDisplay').innerHTML = `
                    <div class="text-center text-gray-500 mt-8">
                        ${isCorrect ? 'âœ… æ­£è§£ï¼' : 'âŒ ä¸æ­£è§£'}<br>
                        ã€Œãƒ†ã‚¹ãƒˆé–‹å§‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦æ¬¡ã®å•é¡Œã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸ï¼
                    </div>
                `;
            }, 2000);
        }

        function skipQuestion() {
            if (currentQuiz) {
                showEmiTip("æ¬¡ã®å•é¡Œã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¾ã—ã‚‡ã†ï¼ğŸ’ª");
                startQuiz();
            }
        }

        // Show Emi's tips
        function showEmiTip(message) {
            const tipsContainer = document.getElementById('emiTips');
            const tipElement = document.createElement('div');
            tipElement.className = 'speech-bubble bounce-in';
            tipElement.innerHTML = `<p class="text-sm text-gray-700">${message}</p>`;
            
            tipsContainer.appendChild(tipElement);
            
            // Remove old tips if too many
            const tips = tipsContainer.querySelectorAll('.speech-bubble');
            if (tips.length > 3) {
                tips[0].remove();
            }
            
            // Scroll to bottom
            tipsContainer.scrollTop = tipsContainer.scrollHeight;
        }

        function showRandomTip() {
            const randomTip = emiTips[Math.floor(Math.random() * emiTips.length)];
            showEmiTip(randomTip);
        }

        // Initialize progress chart
        function initializeChart() {
            const ctx = document.getElementById('progressChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ', 'æ—¥'],
                    datasets: [{
                        label: 'å­¦ç¿’å˜èªæ•°',
                        data: [5, 8, 12, 15, 20, 25, learningState.wordsLearned],
                        borderColor: 'rgb(59, 130, 246)',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.4
                    }, {
                        label: 'å­¦ç¿’ãƒ•ãƒ¬ãƒ¼ã‚ºæ•°',
                        data: [3, 6, 8, 10, 13, 16, learningState.phrasesLearned],
                        borderColor: 'rgb(147, 51, 234)',
                        backgroundColor: 'rgba(147, 51, 234, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'é€±é–“å­¦ç¿’é€²æ—'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // Auto-rotate Emi's tips
        setInterval(() => {
            if (Math.random() < 0.3) { // 30% chance every interval
                showRandomTip();
            }
        }, 30000); // Every 30 seconds

        // Initialize app when page loads
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDgp26UTpKhO0Y%2BDbc22bU122TV3KO22Bci6iXHlR0ItaGFwoIBlCGOae4dWfAar2JDvyCqxLegVAYhKtqqNVO63N4Fm2dYNfIZ570XjWVDxUs5bCB%2BRoLrVXUSAYWlt7kUaUBImJioVcp0U%2FkKweXWDcWZT8loOsWMSpE0paA4XKF9uLHIxO8EFHVhGh3694cBjWg4FesfiM6PnVE6SrWEf8%2FkDuPL1QcfA5NY86pNpEkRKuTHCi3YNEnqbEdw7w3YowkFTi9nUO6gVy371UON6TPOz0L22uPXz1iZ7u0tuWN4dcf3u%2FKwP1COMedm99SPOtxWE4TMu8VYZNRWVb4HB4U9yYx%2FRhabdTUHc3kt3mRm8g0lpd4KjG9j41bbtDDWu81kO5oG3MBVFVpBY6%2FjIRLldoZfn5VEOtdn1JDpchD3tw7t3n29kVOV2RH7ghksD3XcPEJSfHXHFYwJHURsOYcchKQPJrTkFVmLADpZ11GydjQ2mc%2BilRqdp7C%2BS1vt97VySvevfX6i2ag12FOyI%3D";
        window.__genspark_locale = "ja-JP";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDgp26UTpKhO0Y+Dbc22bU122TV3KO22Bci6iXHlR0ItaGFwoIBlCGOae4dWfAar2JDvyCqxLegVAYhKtqqNVO63N4Fm2dYNfIZ570XjWVDxUs5bCB+RoLrVXUSAYWlt7kUaUBImJioVcp0U/kKweXWDcWZT8loOsWMSpE0paA4XKF9uLHIxO8EFHVhGh3694cBjWg4FesfiM6PnVE6SrWEf8/kDuPL1QcfA5NY86pNpEkRKuTHCi3YNEnqbEdw7w3YowkFTi9nUO6gVy371UON6TPOz0L22uPXz1iZ7u0tuWN4dcf3u/KwP1COMedm99SPOtxWE4TMu8VYZNRWVb4HB4U9yYx/RhabdTUHc3kt3mRm8g0lpd4KjG9j41bbtDDWu81kO5oG3MBVFVpBY6/jIRLldoZfn5VEOtdn1JDpchD3tw7t3n29kVOV2RH7ghksD3XcPEJSfHXHFYwJHURsOYcchKQPJrTkFVmLADpZ11GydjQ2mc+ilRqdp7C+S1vt97VySvevfX6i2ag12FOyI=";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    