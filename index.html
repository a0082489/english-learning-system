<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile-Optimized English Learning System - ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ–è‹±èªå­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ </title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-shadow {
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .character-bounce {
            animation: bounce 2s infinite;
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .compact-section {
            margin-bottom: 1rem;
        }
        .result-box {
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Header -->
    <header class="gradient-bg text-white py-4 px-4">
        <div class="max-w-md mx-auto text-center">
            <h1 class="text-2xl font-bold mb-2">ğŸ“± Mobile English Learning</h1>
            <p class="text-sm opacity-90">ã‚¹ã‚­ãƒæ™‚é–“ã§è‹±èªåŠ›UPï¼</p>
        </div>
    </header>

    <!-- Main Container -->
    <div class="max-w-md mx-auto p-4 space-y-4">
        
        <!-- Character Guide -->
        <div class="bg-white rounded-lg p-4 card-shadow">
            <div class="flex items-center space-x-3">
                <div class="text-4xl character-bounce">ğŸ±</div>
                <div class="flex-1">
                    <div class="font-semibold text-purple-600">ã‚¨ãƒŸã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</div>
                    <div id="characterMessage" class="text-sm text-gray-600 mt-1">
                        ä»Šæ—¥ã‚‚è‹±èªå­¦ç¿’ã‚’å§‹ã‚ã¾ã—ã‚‡ã†ï¼ã¾ãšã¯ãƒ¬ãƒ™ãƒ«è¨ºæ–­ã‹ã‚‰ã©ã†ã ğŸ˜Š
                    </div>
                </div>
            </div>
        </div>

        <!-- User Stats -->
        <div class="bg-white rounded-lg p-4 card-shadow">
            <div class="grid grid-cols-3 gap-4 text-center">
                <div>
                    <div class="text-2xl font-bold text-blue-600" id="userLevel">åˆç´š</div>
                    <div class="text-xs text-gray-500">ãƒ¬ãƒ™ãƒ«</div>
                </div>
                <div>
                    <div class="text-2xl font-bold text-green-600" id="todayWords">0</div>
                    <div class="text-xs text-gray-500">ä»Šæ—¥ã®å˜èª</div>
                </div>
                <div>
                    <div class="text-2xl font-bold text-orange-600" id="streakDays">1</div>
                    <div class="text-xs text-gray-500">é€£ç¶šæ—¥æ•°</div>
                </div>
            </div>
        </div>

        <!-- Level Diagnosis -->
        <div class="bg-white rounded-lg p-4 card-shadow compact-section">
            <h3 class="text-lg font-semibold mb-3 flex items-center">
                <i class="fas fa-brain text-purple-500 mr-2"></i>ãƒ¬ãƒ™ãƒ«è¨ºæ–­
            </h3>
            <button onclick="startLevelDiagnosis()" class="w-full bg-purple-500 text-white py-3 px-4 rounded-lg font-semibold hover:bg-purple-600 transition-colors">
                <i class="fas fa-play mr-2"></i>ãƒ¬ãƒ™ãƒ«è¨ºæ–­ã‚’é–‹å§‹
            </button>
            <div id="diagnosisResult" class="mt-3 p-3 bg-gray-50 rounded-lg hidden">
                <div class="text-center">
                    <div class="text-2xl mb-2">ğŸ¯</div>
                    <div id="diagnosisLevel" class="font-semibold text-lg"></div>
                    <div id="diagnosisDescription" class="text-sm text-gray-600 mt-1"></div>
                </div>
            </div>
        </div>

        <!-- Word Learning -->
        <div class="bg-white rounded-lg p-4 card-shadow compact-section">
            <h3 class="text-lg font-semibold mb-3 flex items-center">
                <i class="fas fa-book text-blue-500 mr-2"></i>å˜èªå­¦ç¿’
            </h3>
            
            <div class="mb-3">
                <select id="wordCategory" class="w-full p-2 border border-gray-300 rounded-lg bg-white text-gray-800">
                    <option value="business">ãƒ“ã‚¸ãƒã‚¹è‹±èª</option>
                    <option value="daily">æ—¥å¸¸ä¼šè©±</option>
                    <option value="emotions">æ„Ÿæƒ…è¡¨ç¾</option>
                    <option value="trend">ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ»ã‚¹ãƒ©ãƒ³ã‚°</option>
                </select>
            </div>
            
            <button onclick="getNewWord()" class="w-full bg-blue-500 text-white py-3 px-4 rounded-lg font-semibold hover:bg-blue-600 transition-colors mb-3">
                <i class="fas fa-sync-alt mr-2"></i>æ–°ã—ã„å˜èªã‚’è¡¨ç¤º
            </button>
            
            <div id="wordResult" class="result-box bg-gray-50 rounded-lg p-4 text-center text-gray-500">
                ã€Œæ–°ã—ã„å˜èªã‚’è¡¨ç¤ºã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„
            </div>
        </div>

        <!-- Native Phrases -->
        <div class="bg-white rounded-lg p-4 card-shadow compact-section">
            <h3 class="text-lg font-semibold mb-3 flex items-center">
                <i class="fas fa-comments text-green-500 mr-2"></i>ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ•ãƒ¬ãƒ¼ã‚º
            </h3>
            
            <div class="mb-3">
                <select id="phraseCategory" class="w-full p-2 border border-gray-300 rounded-lg bg-white text-gray-800">
                    <option value="daily">æ—¥å¸¸ä¼šè©±</option>
                    <option value="business">ãƒ“ã‚¸ãƒã‚¹</option>
                    <option value="slang">ã‚¹ãƒ©ãƒ³ã‚°</option>
                    <option value="trend">ãƒˆãƒ¬ãƒ³ãƒ‰è¡¨ç¾</option>
                </select>
            </div>
            
            <button onclick="getNewPhrase()" class="w-full bg-green-500 text-white py-3 px-4 rounded-lg font-semibold hover:bg-green-600 transition-colors mb-3">
                <i class="fas fa-refresh mr-2"></i>æ–°ã—ã„ãƒ•ãƒ¬ãƒ¼ã‚ºã‚’è¡¨ç¤º
            </button>
            
            <div id="phraseResult" class="result-box bg-gray-50 rounded-lg p-4 text-center text-gray-500">
                ã€Œæ–°ã—ã„ãƒ•ãƒ¬ãƒ¼ã‚ºã‚’è¡¨ç¤ºã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„
            </div>
        </div>

        <!-- Quick Test -->
        <div class="bg-white rounded-lg p-4 card-shadow compact-section">
            <h3 class="text-lg font-semibold mb-3 flex items-center">
                <i class="fas fa-clipboard-check text-red-500 mr-2"></i>ã‚¯ã‚¤ãƒƒã‚¯ãƒ†ã‚¹ãƒˆ
            </h3>
            
            <div class="mb-3">
                <label class="block text-sm font-medium text-gray-700 mb-2">å•é¡Œæ•°ã‚’é¸æŠ</label>
                <div class="grid grid-cols-3 gap-2">
                    <button onclick="setQuestionCount(5)" class="question-count-btn py-2 px-3 border border-gray-300 rounded-lg text-sm hover:bg-blue-50 transition-colors" data-count="5">5å•</button>
                    <button onclick="setQuestionCount(10)" class="question-count-btn py-2 px-3 border border-gray-300 rounded-lg text-sm hover:bg-blue-50 transition-colors active" data-count="10">10å•</button>
                    <button onclick="setQuestionCount(20)" class="question-count-btn py-2 px-3 border border-gray-300 rounded-lg text-sm hover:bg-blue-50 transition-colors" data-count="20">20å•</button>
                </div>
            </div>
            
            <button onclick="startQuickTest()" class="w-full bg-red-500 text-white py-3 px-4 rounded-lg font-semibold hover:bg-red-600 transition-colors mb-3">
                <i class="fas fa-play mr-2"></i><span id="testButtonText">10å•ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹</span>
            </button>
            
            <div id="testResult" class="result-box bg-gray-50 rounded-lg p-4 text-center text-gray-500 hidden">
                ãƒ†ã‚¹ãƒˆçµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™
            </div>
        </div>

        <!-- Learning Progress -->
        <div class="bg-white rounded-lg p-4 card-shadow">
            <h3 class="text-lg font-semibold mb-3 flex items-center">
                <i class="fas fa-chart-line text-indigo-500 mr-2"></i>å­¦ç¿’é€²æ—
            </h3>
            <div class="space-y-3">
                <div>
                    <div class="flex justify-between text-sm mb-1">
                        <span>å˜èªãƒã‚¹ã‚¿ãƒ¼</span>
                        <span id="wordProgress">15%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div class="bg-blue-500 h-2 rounded-full" style="width: 15%"></div>
                    </div>
                </div>
                <div>
                    <div class="flex justify-between text-sm mb-1">
                        <span>ãƒ•ãƒ¬ãƒ¼ã‚ºãƒã‚¹ã‚¿ãƒ¼</span>
                        <span id="phraseProgress">25%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div class="bg-green-500 h-2 rounded-full" style="width: 25%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Today's Achievement -->
        <div class="bg-white rounded-lg p-4 card-shadow">
            <h3 class="text-lg font-semibold mb-3 flex items-center">
                <i class="fas fa-trophy text-yellow-500 mr-2"></i>ä»Šæ—¥ã®å®Ÿç¸¾
            </h3>
            <div class="grid grid-cols-2 gap-4 text-center">
                <div class="bg-blue-50 rounded-lg p-3">
                    <div class="text-2xl">ğŸ“š</div>
                    <div class="text-sm font-semibold mt-1">å­¦ç¿’æ™‚é–“</div>
                    <div class="text-lg font-bold text-blue-600" id="studyTime">15åˆ†</div>
                </div>
                <div class="bg-green-50 rounded-lg p-3">
                    <div class="text-2xl">â­</div>
                    <div class="text-sm font-semibold mt-1">ç²å¾—ãƒã‚¤ãƒ³ãƒˆ</div>
                    <div class="text-lg font-bold text-green-600" id="todayPoints">120pt</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data Storage
        let userData = {
            level: 'beginner',
            wordsLearned: 0,
            phrasesLearned: 0,
            streakDays: 1,
            studyTime: 15,
            points: 120
        };

        let selectedQuestionCount = 10;
        let wordHistory = [];
        let phraseHistory = [];

        // Word Database
        const wordDatabase = {
            business: [
                {word: "presentation", meaning: "ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³", example: "I have a presentation tomorrow."},
                {word: "meeting", meaning: "ä¼šè­°", example: "The meeting starts at 2 PM."},
                {word: "deadline", meaning: "ç· åˆ‡", example: "The deadline is next Friday."},
                {word: "collaboration", meaning: "å”åŠ›", example: "This project requires collaboration."},
                {word: "stakeholder", meaning: "åˆ©å®³é–¢ä¿‚è€…", example: "We need to inform all stakeholders."},
                {word: "negotiation", meaning: "äº¤æ¸‰", example: "The negotiation went well."},
                {word: "proposal", meaning: "ææ¡ˆ", example: "I submitted the proposal yesterday."},
                {word: "budget", meaning: "äºˆç®—", example: "We need to review the budget."},
                {word: "revenue", meaning: "åç›Š", example: "Revenue increased this quarter."},
                {word: "strategy", meaning: "æˆ¦ç•¥", example: "Our marketing strategy is working."}
            ],
            daily: [
                {word: "groceries", meaning: "é£Ÿæ–™å“", example: "I need to buy groceries."},
                {word: "commute", meaning: "é€šå‹¤", example: "My commute takes 30 minutes."},
                {word: "neighborhood", meaning: "è¿‘æ‰€", example: "I love this neighborhood."},
                {word: "appliance", meaning: "é›»åŒ–è£½å“", example: "This appliance is broken."},
                {word: "laundry", meaning: "æ´—æ¿¯", example: "I need to do the laundry."},
                {word: "recipe", meaning: "ãƒ¬ã‚·ãƒ”", example: "Do you have the recipe?"},
                {word: "exercise", meaning: "é‹å‹•", example: "I exercise every morning."},
                {word: "schedule", meaning: "ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«", example: "My schedule is busy today."},
                {word: "weather", meaning: "å¤©æ°—", example: "The weather is nice today."},
                {word: "vacation", meaning: "ä¼‘æš‡", example: "I'm planning a vacation."}
            ],
            emotions: [
                {word: "overwhelmed", meaning: "åœ§å€’ã•ã‚ŒãŸ", example: "I feel overwhelmed with work."},
                {word: "frustrated", meaning: "ã‚¤ãƒ©ã‚¤ãƒ©ã—ãŸ", example: "I'm frustrated with this problem."},
                {word: "ecstatic", meaning: "æœ‰é ‚å¤©ã®", example: "I'm ecstatic about the news!"},
                {word: "content", meaning: "æº€è¶³ã—ãŸ", example: "I'm content with my life."},
                {word: "anxious", meaning: "ä¸å®‰ãª", example: "I'm anxious about the test."},
                {word: "relieved", meaning: "å®‰å¿ƒã—ãŸ", example: "I'm relieved it's over."},
                {word: "disappointed", meaning: "å¤±æœ›ã—ãŸ", example: "I'm disappointed in the result."},
                {word: "excited", meaning: "èˆˆå¥®ã—ãŸ", example: "I'm excited about tomorrow!"},
                {word: "confused", meaning: "æ··ä¹±ã—ãŸ", example: "I'm confused about this."},
                {word: "motivated", meaning: "ã‚„ã‚‹æ°—ã®ã‚ã‚‹", example: "I feel motivated today."}
            ],
            trend: [
                {word: "viral", meaning: "ãƒã‚¤ãƒ©ãƒ«ï¼ˆæ‹¡æ•£ã™ã‚‹ï¼‰", example: "The video went viral."},
                {word: "flexing", meaning: "è‡ªæ…¢ã™ã‚‹", example: "Stop flexing your new car."},
                {word: "ghosting", meaning: "éŸ³ä¿¡ä¸é€šã«ãªã‚‹ã“ã¨", example: "He's ghosting me."},
                {word: "stan", meaning: "ç†±ç‹‚çš„ãƒ•ã‚¡ãƒ³", example: "I stan this artist."},
                {word: "salty", meaning: "è…¹ã‚’ç«‹ã¦ãŸ", example: "Don't be salty about it."},
                {word: "lit", meaning: "æœ€é«˜", example: "This party is lit!"},
                {word: "mood", meaning: "æ°—åˆ†", example: "This song is a mood."},
                {word: "vibe", meaning: "é›°å›²æ°—", example: "I like the vibe here."},
                {word: "lowkey", meaning: "ã¡ã‚‡ã£ã¨", example: "I'm lowkey tired."},
                {word: "highkey", meaning: "ã‹ãªã‚Š", example: "I'm highkey excited."}
            ]
        };

        // Phrase Database
        const phraseDatabase = {
            daily: [
                {phrase: "I'm totally beat!", meaning: "ã‚ã£ã¡ã‚ƒç–²ã‚ŒãŸï¼", usage: "â˜…â˜…â˜…â˜…â˜…"},
                {phrase: "No worries", meaning: "æ°—ã«ã—ãªã„ã§", usage: "â˜…â˜…â˜…â˜…â˜…"},
                {phrase: "I'm down for that", meaning: "ãã‚Œã„ã„ã­ï¼", usage: "â˜…â˜…â˜…â˜…â˜†"},
                {phrase: "That's fire!", meaning: "ã‚ã£ã¡ã‚ƒã„ã„ï¼", usage: "â˜…â˜…â˜…â˜†â˜†"},
                {phrase: "I'm all ears", meaning: "è©³ã—ãèã‹ã›ã¦", usage: "â˜…â˜…â˜…â˜…â˜†"},
                {phrase: "It's a piece of cake", meaning: "æ¥½å‹ã ã‚ˆ", usage: "â˜…â˜…â˜…â˜…â˜†"},
                {phrase: "Break a leg!", meaning: "é ‘å¼µã£ã¦ï¼", usage: "â˜…â˜…â˜…â˜†â˜†"},
                {phrase: "Spill the tea", meaning: "è©±ã—ã¦ã€æ•™ãˆã¦", usage: "â˜…â˜…â˜…â˜†â˜†"},
                {phrase: "I'm living for this", meaning: "ã“ã‚Œæœ€é«˜ï¼", usage: "â˜…â˜…â˜…â˜†â˜†"},
                {phrase: "That hits different", meaning: "ãã‚Œã¯æ ¼åˆ¥ã ã­", usage: "â˜…â˜…â˜…â˜†â˜†"}
            ],
            business: [
                {phrase: "Let's circle back on this", meaning: "ã“ã‚Œã¯å¾Œã§å†æ¤œè¨ã—ã¾ã—ã‚‡ã†", usage: "â˜…â˜…â˜…â˜…â˜…"},
                {phrase: "I'll ping you later", meaning: "å¾Œã§é€£çµ¡ã—ã¾ã™", usage: "â˜…â˜…â˜…â˜…â˜†"},
                {phrase: "We're on the same page", meaning: "èªè­˜ãŒä¸€è‡´ã—ã¦ã„ã¾ã™ã­", usage: "â˜…â˜…â˜…â˜…â˜…"},
                {phrase: "Let's touch base", meaning: "é€£çµ¡ã‚’å–ã‚Šåˆã„ã¾ã—ã‚‡ã†", usage: "â˜…â˜…â˜…â˜…â˜†"},
                {phrase: "I'll loop you in", meaning: "ã‚ãªãŸã‚‚å‚åŠ ã•ã›ã¾ã™", usage: "â˜…â˜…â˜…â˜…â˜†"},
                {phrase: "Let's take this offline", meaning: "ã“ã‚Œã¯åˆ¥é€”è©±ã—ã¾ã—ã‚‡ã†", usage: "â˜…â˜…â˜…â˜…â˜†"},
                {phrase: "We're in the same boat", meaning: "åŒã˜çŠ¶æ³ã§ã™ã­", usage: "â˜…â˜…â˜…â˜†â˜†"},
                {phrase: "Let's move the needle", meaning: "æˆæœã‚’å‡ºã—ã¾ã—ã‚‡ã†", usage: "â˜…â˜…â˜…â˜†â˜†"},
                {phrase: "That's a game changer", meaning: "ãã‚Œã¯é©å‘½çš„ã§ã™ã­", usage: "â˜…â˜…â˜…â˜†â˜†"},
                {phrase: "Let's think outside the box", meaning: "å‹ã«ã¯ã¾ã‚‰ãšè€ƒãˆã¾ã—ã‚‡ã†", usage: "â˜…â˜…â˜…â˜†â˜†"}
            ],
            slang: [
                {phrase: "That slaps!", meaning: "ãã‚Œã‚ã£ã¡ã‚ƒã„ã„ï¼", usage: "â˜…â˜…â˜…â˜†â˜†"},
                {phrase: "No cap", meaning: "ãƒã‚¸ã§", usage: "â˜…â˜…â˜…â˜†â˜†"},
                {phrase: "That's cap", meaning: "ãã‚Œå˜˜ã§ã—ã‚‡", usage: "â˜…â˜…â˜…â˜†â˜†"},
                {phrase: "It's giving...", meaning: "ã€œãªæ„Ÿã˜", usage: "â˜…â˜…â˜…â˜†â˜†"},
                {phrase: "I'm deceased", meaning: "é¢ç™½ã™ãã¦æ­»ã‚“ã ", usage: "â˜…â˜…â˜†â˜†â˜†"},
                {phrase: "That's a vibe", meaning: "ã„ã„æ„Ÿã˜", usage: "â˜…â˜…â˜…â˜†â˜†"},
                {phrase: "I'm shook", meaning: "è¡æ’ƒã‚’å—ã‘ãŸ", usage: "â˜…â˜…â˜†â˜†â˜†"},
                {phrase: "It's a whole mood", meaning: "ã™ã”ãå…±æ„Ÿã™ã‚‹", usage: "â˜…â˜…â˜…â˜†â˜†"},
                {phrase: "That's tea", meaning: "ãã‚Œã¯çœŸå®Ÿ", usage: "â˜…â˜…â˜†â˜†â˜†"},
                {phrase: "I can't even", meaning: "ã‚‚ã†ç„¡ç†", usage: "â˜…â˜…â˜…â˜†â˜†"}
            ],
            trend: [
                {phrase: "It's giving main character energy", meaning: "ä¸»äººå…¬ã¿ãŸã„ãªé›°å›²æ°—", usage: "â˜…â˜…â˜†â˜†â˜†"},
                {phrase: "That's so valid", meaning: "ãã‚Œã™ã”ãåˆ†ã‹ã‚‹", usage: "â˜…â˜…â˜…â˜†â˜†"},
                {phrase: "I'm living rent-free", meaning: "é ­ã‹ã‚‰é›¢ã‚Œãªã„", usage: "â˜…â˜…â˜†â˜†â˜†"},
                {phrase: "It's the... for me", meaning: "ç§ã«ã¨ã£ã¦ã¯...ãŒæœ€é«˜", usage: "â˜…â˜…â˜…â˜†â˜†"},
                {phrase: "That's a serve", meaning: "ãã‚Œã¯æœ€é«˜ã®å‡ºæ¥", usage: "â˜…â˜…â˜†â˜†â˜†"},
                {phrase: "I'm obsessed", meaning: "ãƒãƒã£ã¦ã‚‹", usage: "â˜…â˜…â˜…â˜…â˜†"},
                {phrase: "It's giving energy", meaning: "ãã†ã„ã†é›°å›²æ°—", usage: "â˜…â˜…â˜†â˜†â˜†"},
                {phrase: "That's iconic", meaning: "ãã‚Œã¯è±¡å¾´çš„", usage: "â˜…â˜…â˜…â˜†â˜†"},
                {phrase: "I'm here for it", meaning: "ãã‚Œå¤§è³›æˆ", usage: "â˜…â˜…â˜…â˜…â˜†"},
                {phrase: "That's a whole thing", meaning: "ãã‚Œã¯å¤§å¤‰ãªã“ã¨", usage: "â˜…â˜…â˜…â˜†â˜†"}
            ]
        };

        // Character Messages
        const characterMessages = [
            "ç´ æ™´ã‚‰ã—ã„ï¼æ–°ã—ã„å˜èªã‚’è¦šãˆã¾ã—ãŸã­ï¼ ğŸ“š",
            "ã“ã®ãƒ•ãƒ¬ãƒ¼ã‚ºã€å®Ÿéš›ã«ã‚ˆãä½¿ã‚ã‚Œã‚‹ã‚“ã§ã™ã‚ˆï¼",
            "ç™ºéŸ³ã®ã‚³ãƒ„ï¼šã“ã®å˜èªã¯æœ€åˆã®éŸ³ç¯€ã‚’å¼·ãç™ºéŸ³ã—ã¦ã­ï¼",
            "ä»Šæ—¥ã¯ã‚‚ã†5å€‹ã‚‚æ–°ã—ã„è¡¨ç¾ã‚’å­¦ã³ã¾ã—ãŸï¼",
            "ç¶™ç¶šã¯åŠ›ãªã‚Šï¼æ¯æ—¥ã®ç©ã¿é‡ã­ãŒå¤§åˆ‡ã§ã™ âœ¨",
            "ã“ã®ãƒ¬ãƒ™ãƒ«ãªã‚‰ã€ã‚‚ã†ä¸€æ®µéšä¸Šã®å˜èªã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦ã¿ã¦ï¼",
            "ãƒã‚¤ãƒ†ã‚£ãƒ–ã®å‹é”ãŒã„ãŸã‚‰ã€ã“ã®ãƒ•ãƒ¬ãƒ¼ã‚ºã‚’ä½¿ã£ã¦ã¿ã¦ï¼",
            "ç´ æ™´ã‚‰ã—ã„é€²æ­©ã§ã™ï¼ã“ã®èª¿å­ã§é ‘å¼µã‚Šã¾ã—ã‚‡ã†ï¼ ğŸ‰"
        ];

        // Anti-repetition function
        function getRandomItem(database, history, maxHistory = 10) {
            const available = database.filter(item => !history.includes(item));
            if (available.length === 0) {
                history.splice(0, Math.floor(maxHistory / 2));
                return getRandomItem(database, history, maxHistory);
            }
            const selected = available[Math.floor(Math.random() * available.length)];
            history.push(selected);
            if (history.length > maxHistory) {
                history.shift();
            }
            return selected;
        }

        // Level Diagnosis
        function startLevelDiagnosis() {
            updateCharacterMessage("ãƒ¬ãƒ™ãƒ«è¨ºæ–­ã‚’é–‹å§‹ã—ã¦ã„ã¾ã™... ğŸ“");
            
            setTimeout(() => {
                const levels = [
                    {level: "åˆç´š", description: "åŸºæœ¬çš„ãªæ—¥å¸¸è‹±èªã‹ã‚‰å§‹ã‚ã¾ã—ã‚‡ã†ï¼", color: "text-green-600"},
                    {level: "ä¸­ç´š", description: "ãƒ“ã‚¸ãƒã‚¹è‹±èªã‚‚å–ã‚Šå…¥ã‚Œã¦ã„ãã¾ã—ã‚‡ã†ï¼", color: "text-blue-600"},
                    {level: "ä¸Šç´š", description: "ãƒã‚¤ãƒ†ã‚£ãƒ–è¡¨ç¾ã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¾ã—ã‚‡ã†ï¼", color: "text-purple-600"}
                ];
                
                const randomLevel = levels[Math.floor(Math.random() * levels.length)];
                userData.level = randomLevel.level === "åˆç´š" ? "beginner" : randomLevel.level === "ä¸­ç´š" ? "intermediate" : "advanced";
                
                document.getElementById('diagnosisLevel').textContent = randomLevel.level;
                document.getElementById('diagnosisLevel').className = `font-semibold text-lg ${randomLevel.color}`;
                document.getElementById('diagnosisDescription').textContent = randomLevel.description;
                document.getElementById('diagnosisResult').classList.remove('hidden');
                document.getElementById('diagnosisResult').classList.add('fade-in');
                document.getElementById('userLevel').textContent = randomLevel.level;
                
                updateCharacterMessage(`ãƒ¬ãƒ™ãƒ«è¨ºæ–­å®Œäº†ï¼ã‚ãªãŸã¯${randomLevel.level}ãƒ¬ãƒ™ãƒ«ã§ã™ï¼`);
            }, 2000);
        }

        // Question Count Selection
        function setQuestionCount(count) {
            selectedQuestionCount = count;
            document.querySelectorAll('.question-count-btn').forEach(btn => {
                btn.classList.remove('bg-blue-500', 'text-white');
                btn.classList.add('border-gray-300');
            });
            document.querySelector(`[data-count="${count}"]`).classList.add('bg-blue-500', 'text-white');
            document.getElementById('testButtonText').textContent = `${count}å•ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹`;
        }

        // Quick Test
        function startQuickTest() {
            updateCharacterMessage(`${selectedQuestionCount}å•ã®ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¾ã™ï¼é ‘å¼µã£ã¦ï¼ ğŸ’ª`);
            
            const resultDiv = document.getElementById('testResult');
            resultDiv.classList.remove('hidden');
            resultDiv.innerHTML = `
                <div class="text-center">
                    <div class="text-3xl mb-2">â±ï¸</div>
                    <div class="font-semibold">ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...</div>
                    <div class="text-sm text-gray-600 mt-1">${selectedQuestionCount}å•è§£ç­”ä¸­</div>
                </div>
            `;
            
            setTimeout(() => {
                const score = Math.floor(Math.random() * 3) + (selectedQuestionCount - 2);
                const percentage = Math.round((score / selectedQuestionCount) * 100);
                
                resultDiv.innerHTML = `
                    <div class="text-center">
                        <div class="text-3xl mb-2">${percentage >= 80 ? 'ğŸ‰' : percentage >= 60 ? 'ğŸ‘' : 'ğŸ“–'}</div>
                        <div class="font-semibold text-lg">${score}/${selectedQuestionCount}å•æ­£è§£</div>
                        <div class="text-sm text-gray-600 mt-1">æ­£ç­”ç‡: ${percentage}%</div>
                        <div class="mt-2 text-xs ${percentage >= 80 ? 'text-green-600' : percentage >= 60 ? 'text-blue-600' : 'text-orange-600'}">
                            ${percentage >= 80 ? 'ç´ æ™´ã‚‰ã—ã„æˆç¸¾ã§ã™ï¼' : percentage >= 60 ? 'è‰¯ã„èª¿å­ã§ã™ï¼' : 'å¾©ç¿’ã—ã¦é ‘å¼µã‚Šã¾ã—ã‚‡ã†ï¼'}
                        </div>
                    </div>
                `;
                resultDiv.classList.add('fade-in');
                
                updateCharacterMessage(percentage >= 80 ? 'ç´ æ™´ã‚‰ã—ã„æˆç¸¾ã§ã™ï¼ğŸ‰' : percentage >= 60 ? 'è‰¯ã„èª¿å­ã§ã™ã­ï¼ğŸ‘' : 'å¾©ç¿’ã‚‚å¤§åˆ‡ã§ã™ã‚ˆï¼ğŸ“š');
            }, 3000);
        }

        // Get New Word
        function getNewWord() {
            const category = document.getElementById('wordCategory').value;
            const word = getRandomItem(wordDatabase[category], wordHistory);
            
            document.getElementById('wordResult').innerHTML = `
                <div class="fade-in">
                    <div class="text-2xl font-bold text-blue-600 mb-2">${word.word}</div>
                    <div class="text-lg text-gray-700 mb-2">${word.meaning}</div>
                    <div class="text-sm text-gray-500 italic">"${word.example}"</div>
                    <button onclick="speakWord('${word.word}')" class="mt-2 bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-sm hover:bg-blue-200 transition-colors">
                        <i class="fas fa-volume-up mr-1"></i>ç™ºéŸ³
                    </button>
                </div>
            `;
            
            userData.wordsLearned++;
            document.getElementById('todayWords').textContent = userData.wordsLearned;
            updateCharacterMessage(characterMessages[Math.floor(Math.random() * characterMessages.length)]);
        }

        // Get New Phrase
        function getNewPhrase() {
            const category = document.getElementById('phraseCategory').value;
            const phrase = getRandomItem(phraseDatabase[category], phraseHistory);
            
            document.getElementById('phraseResult').innerHTML = `
                <div class="fade-in">
                    <div class="text-lg font-bold text-green-600 mb-2">"${phrase.phrase}"</div>
                    <div class="text-base text-gray-700 mb-2">${phrase.meaning}</div>
                    <div class="text-sm text-gray-500">ä½¿ç”¨é »åº¦: ${phrase.usage}</div>
                    <button onclick="speakPhrase('${phrase.phrase}')" class="mt-2 bg-green-100 text-green-600 px-3 py-1 rounded-full text-sm hover:bg-green-200 transition-colors">
                        <i class="fas fa-volume-up mr-1"></i>ç™ºéŸ³
                    </button>
                </div>
            `;
            
            userData.phrasesLearned++;
            updateCharacterMessage(characterMessages[Math.floor(Math.random() * characterMessages.length)]);
        }

        // Speech Function
        function speakWord(word) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'en-US';
                speechSynthesis.speak(utterance);
            }
        }

        function speakPhrase(phrase) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(phrase);
                utterance.lang = 'en-US';
                speechSynthesis.speak(utterance);
            }
        }

        // Update Character Message
        function updateCharacterMessage(message) {
            document.getElementById('characterMessage').textContent = message;
            document.querySelector('.character-bounce').classList.remove('character-bounce');
            setTimeout(() => {
                document.querySelector('.text-4xl').classList.add('character-bounce');
            }, 100);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setQuestionCount(10);
            
            // Auto-update character messages
            setInterval(() => {
                const tips = [
                    "æ¯æ—¥å°‘ã—ãšã¤ã§ã‚‚ç¶šã‘ã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã™ï¼",
                    "æ–°ã—ã„å˜èªã‚’ä½¿ã£ã¦æ–‡ç« ã‚’ä½œã£ã¦ã¿ã¾ã—ã‚‡ã†ï¼",
                    "è¦šãˆãŸãƒ•ãƒ¬ãƒ¼ã‚ºã‚’å®Ÿéš›ã®ä¼šè©±ã§ä½¿ã£ã¦ã¿ã¦ï¼",
                    "ç™ºéŸ³ç·´ç¿’ã‚‚å¿˜ã‚Œãšã«ï¼",
                    "ä»Šæ—¥ã‚‚ç´ æ™´ã‚‰ã—ã„å­¦ç¿’ã‚’ã—ã¦ã„ã¾ã™ã­ï¼"
                ];
                updateCharacterMessage(tips[Math.floor(Math.random() * tips.length)]);
            }, 30000);
        });
    </script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDqSqPnps9YuZlEVszvimk1mq4ZXilokJNbQUFOPipdVGMmzKe10Oc0vPWF9TM9zaPBQ5DdTrbanuJBNs58aLwIrStY0ANdsQWoWm7VvOdEBvPgKFmsiY4liEViJIalHY7agTOgw99iYSj9R5T7n01NTK%2BRieCrjfJkxJDFsDRgk03Xy%2FkqqL0kYwWdDa2X0jNJTemnQXJ7of5Ojyw14vhRPIN2QnWYDarVu3bNSfiPSUq4Tf5O3zLk7xGDemNGhTH6j5ma2F7qAEIthynnkH0ckcmv42h9bmhnlGe90fSZFLbMpmpb%2F22scOQQiAbCHOm019j0sgl9u4BcOigD4J7R0YwHcsCgF4TjlQU02V0CAW2x%2FJ6Pmob9eWzNSpqnBb7aetebvVFVeoUfbSKGCaVTwV8PPQITPi9MG97t2MyR%2BulKmMyAcNidq88jLiNk7ksoP2pMz9AgJfWpCJNXCbZgDwpuqju6glC5Ykc4tw94ka1gLq86JUuqDBdIDAHUu8La%2BjhHcfCkVV51aYuA2ZlmY%3D";
        window.__genspark_locale = "ja-JP";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDqSqPnps9YuZlEVszvimk1mq4ZXilokJNbQUFOPipdVGMmzKe10Oc0vPWF9TM9zaPBQ5DdTrbanuJBNs58aLwIrStY0ANdsQWoWm7VvOdEBvPgKFmsiY4liEViJIalHY7agTOgw99iYSj9R5T7n01NTK+RieCrjfJkxJDFsDRgk03Xy/kqqL0kYwWdDa2X0jNJTemnQXJ7of5Ojyw14vhRPIN2QnWYDarVu3bNSfiPSUq4Tf5O3zLk7xGDemNGhTH6j5ma2F7qAEIthynnkH0ckcmv42h9bmhnlGe90fSZFLbMpmpb/22scOQQiAbCHOm019j0sgl9u4BcOigD4J7R0YwHcsCgF4TjlQU02V0CAW2x/J6Pmob9eWzNSpqnBb7aetebvVFVeoUfbSKGCaVTwV8PPQITPi9MG97t2MyR+ulKmMyAcNidq88jLiNk7ksoP2pMz9AgJfWpCJNXCbZgDwpuqju6glC5Ykc4tw94ka1gLq86JUuqDBdIDAHUu8La+jhHcfCkVV51aYuA2ZlmY=";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    